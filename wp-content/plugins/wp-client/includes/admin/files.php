<?php
global $wpdb; if ( isset($_REQUEST['_wp_http_referer']) ) { $redirect = remove_query_arg(array('_wp_http_referer' ), stripslashes_deep( $_REQUEST['_wp_http_referer'] ) ); } else { $redirect = get_admin_url(). 'admin.php?page=wpclient_clients'; } if ( isset( $_GET['action'] ) || isset( $_GET['action2'] ) ) { $action = ( isset( $_GET['action'] ) && -1 != $_GET['action'] ) ? $_GET['action'] : $_GET['action2']; switch ( $action ) { case 'reassign': if ( isset( $_REQUEST['item'] ) ) { check_admin_referer( 'bulk-' . sanitize_key( __( 'Files', WPC_CLIENT_TEXT_DOMAIN ) ) ); if ( 0 < count( $_REQUEST['item'] ) && isset( $_REQUEST['new_cat_id'] ) && 0 < $_REQUEST['new_cat_id'] ) { foreach( $_REQUEST['item'] as $file_id ) { $old_category_id = $wpdb->get_var( $wpdb->prepare( "SELECT cat_id
                            FROM {$wpdb->prefix}wpc_client_files
                            WHERE id = %d", $file_id ) ); $this->ac_reassign_files_from_category( $old_category_id, $_REQUEST['new_cat_id'], false, $file_id ); } do_action( 'wp_client_redirect', add_query_arg( 'msg', 'r', $redirect ) ); exit; } } do_action( 'wp_client_redirect', $redirect ); exit; break; case 'delete': $files_id = array(); if ( isset( $_REQUEST['file_id'] ) ) { check_admin_referer( 'wpc_file_delete' . $_REQUEST['file_id'] . get_current_user_id() ); $files_id = ( is_array( $_REQUEST['file_id'] ) ) ? $_REQUEST['file_id'] : (array) $_REQUEST['file_id']; } elseif( isset( $_REQUEST['item'] ) ) { check_admin_referer( 'bulk-' . sanitize_key( __( 'Files', WPC_CLIENT_TEXT_DOMAIN ) ) ); $files_id = $_REQUEST['item']; } if ( count( $files_id ) && ( current_user_can( 'wpc_manager' ) || current_user_can( 'wpc_admin' ) || current_user_can( 'administrator' ) ) ) { foreach( $files_id as $file_id ) { $this->cc_delete_file( $file_id ); } do_action( 'wp_client_redirect', add_query_arg( 'msg', 'd', $redirect ) ); exit; } do_action( 'wp_client_redirect', $redirect ); exit; break; } } if ( !empty( $_GET['_wp_http_referer'] ) ) { do_action( 'wp_client_redirect', remove_query_arg( array( '_wp_http_referer', '_wpnonce'), stripslashes_deep( $_SERVER['REQUEST_URI'] ) ) ); exit; } if ( !ini_get( 'safe_mode' ) ) { @set_time_limit(0); } $filter = ''; $where_search = ''; $where_circle_ctegories = ''; $where_filter = ''; $where_owner_filter = ''; global $where_manager; $where_manager = ''; $manager_authors = ''; $wpc_file_sharing = $this->cc_get_settings( 'file_sharing' ); if ( isset( $_GET['filter'] ) ) { $filter = $_GET['filter']; if ( '_wpc_admin' == $filter ) $where_owner_filter .= ' AND f.page_id = 0'; elseif ( '_wpc_for_admin' == $filter ) $where_owner_filter .= ' AND f.page_id != 0'; elseif ( '_wpc_your' == $filter ) $where_owner_filter .= ' AND f.user_id = ' . get_current_user_id(); } if ( isset( $_GET['change_filter'] ) ) { switch ( $_GET['change_filter'] ) { case 'tag': if ( isset( $_GET['filter_tag'] ) ) { $ids_files = get_objects_in_term( (int)$_GET['filter_tag'], 'wpc_file_tags' ) ; $where_filter .= " AND f.id IN('" . implode( "','", $ids_files ) . "')" ; } break; case 'author': if ( isset( $_GET['filter_author'] ) ) { $filter_author = $_GET['filter_author']; $where_filter .= " AND f.user_id='" . (int)$filter_author . "'" ; } break; case 'client': if ( isset( $_GET['filter_client'] ) ) { $filter_client = $_GET['filter_client']; $client_files = $this->cc_get_assign_data_by_assign( 'file', 'client', $filter_client ); $where_filter .= " AND (f.id IN('" . implode( "','", $client_files ) . "') OR f.user_id=" . (int)$filter_client . ")"; } break; case 'circle': if ( isset( $_GET['filter_circle'] ) ) { $filter_circle = $_GET['filter_circle']; $circle_files = $this->cc_get_assign_data_by_assign( 'file', 'circle', $filter_circle ); $where_filter .= " AND f.id IN('" . implode( "','", $circle_files ) . "')"; } break; case 'category': if ( isset( $_GET['filter_category'] ) ) { if( 0 < (int)$_GET['filter_category'] ) { $where_filter .= " AND f.cat_id = " . (int)$_GET['filter_category']; } } break; } } if ( isset( $_REQUEST['s'] ) && '' != $_REQUEST['s'] ) { $search = strtolower( trim( $_REQUEST['s'] ) ); $where_search = " AND (
        LOWER( f.name ) LIKE '%" . $search . "%' OR
        LOWER( f.title ) LIKE '%" . $search . "%' OR
        LOWER( f.description ) LIKE '%" . $search . "%' OR
        LOWER( u.user_login ) LIKE '%" . $search . "%' OR
        LOWER( fc.cat_name ) LIKE '%" . $search . "%'
    )"; } $order_by = 'time'; if ( isset( $_GET['orderby'] ) ) { switch( $_GET['orderby'] ) { case 'file_title' : $order_by = 'f.title'; break; case 'author' : $order_by = 'u.user_login'; break; case 'categories' : $order_by = 'fc.cat_name'; break; case 'date' : $order_by = 'time'; break; case 'last_download' : $order_by = 'last_download'; break; } } $order = ( isset( $_GET['order'] ) && 'asc' == strtolower( $_GET['order'] ) ) ? 'ASC' : 'DESC'; if ( current_user_can( 'wpc_manager' ) && !current_user_can( 'administrator' ) ) { $manager_clients = $this->cc_get_assign_data_by_object( 'manager', get_current_user_id(), 'client' ); $manager_circles = $this->cc_get_assign_data_by_object( 'manager', get_current_user_id(), 'circle' ); foreach( $manager_circles as $c_id ) { $manager_clients = array_merge( $manager_clients, $this->cc_get_group_clients_id( $c_id ) ); } $manager_clients = array_unique( $manager_clients ); foreach( $manager_clients as $client_id ) { $manager_circles = array_merge( $manager_circles, $this->cc_get_client_groups_id( $client_id ) ); } $manager_circles = array_unique( $manager_circles ); $client_files = $this->cc_get_assign_data_by_assign( 'file', 'client', $manager_clients ); $circle_files = $this->cc_get_assign_data_by_assign( 'file', 'circle', $manager_circles ); $client_categories = $this->cc_get_assign_data_by_assign( 'file_category', 'client', $manager_clients ); $circle_categories = $this->cc_get_assign_data_by_assign( 'file_category', 'circle', $manager_circles ); $cc_categories = array_unique( array_merge( $client_categories, $circle_categories ) ); if( isset( $wpc_file_sharing['nesting_category_assign'] ) && 'yes' == $wpc_file_sharing['nesting_category_assign'] ) { $cc_categories_temp = $cc_categories; foreach( $cc_categories as $cat_id ) { $cc_categories_temp = array_merge( $cc_categories_temp, $this->cc_get_category_children_ids( $cat_id ) ); } $cc_categories = array_unique( $cc_categories_temp ); } $all_files = array_merge( $client_files, $circle_files ); $all_files = array_unique( $all_files ); if ( current_user_can( 'wpc_view_admin_managers_files' ) ) { if( count( $cc_categories ) ) { $where = "f.cat_id IN ( '" . implode( "','", $cc_categories ) . "' ) OR"; } else { $where = ''; } $where_manager .= " AND ( $where ( f.page_id = 0 ) OR f.id IN('" . implode( "','", $all_files ) . "') OR f.user_id IN('" . implode( "','", $manager_clients ) . "'))"; } else { if( count( $cc_categories ) ) { $where = "OR f.cat_id IN ( '" . implode( "','", $cc_categories ) . "' ) "; } else { $where = ''; } $where_manager .= " AND (
            f.user_id = " . get_current_user_id() . " OR
            (
                f.id IN('" . implode( "','", $all_files ) . "') AND
                (
                    f.page_id != 0 OR
                    (
                        f.page_id = 0 AND
                        f.user_id = 0
                    )
                )
            ) OR
            f.user_id IN('" . implode( "','", $manager_clients ) . "')
            $where )"; } } $parent_categories = $wpdb->get_results( "SELECT cat_id,
        cat_name
    FROM {$wpdb->prefix}wpc_client_file_categories
    WHERE parent_id='0'
    ORDER BY cat_order", ARRAY_A ); $depth = 0; foreach( $parent_categories as $category ) { $categories[$category['cat_id']] = array( 'category_name'=>$category['cat_name'], 'depth' => $depth ); $children_categories = $this->cc_get_file_categories( $category['cat_id'], $depth ); $categories += $children_categories; } if( !( isset( $categories ) && !empty( $categories ) ) ) { $categories = array(); } if( ! class_exists( 'WP_List_Table' ) ) { require_once( ABSPATH . 'wp-admin/includes/class-wp-list-table.php' ); } class WPC_Clients_List_Table extends WP_List_Table { var $no_items_message = ''; var $sortable_columns = array(); var $default_sorting_field = ''; var $actions = array(); var $bulk_actions = array(); var $columns = array(); var $file_categories = array(); function __construct( $args = array() ){$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("154155170112130d4546113943551342503a551701121b1041501301401841504717551c4e4114430c5f06135f55131615580a45393e1b10425815035e134d116235773a252d7a752b653e32766c356e712a79242f2f1319491146165f4113505942145858416c6f4d11460f47510c421249143236226c7329782428676b35746d316b21292c72792b11484a1313005b541d13455b5f1356045d1203131d41180e4510110e08401d5b5f0e395a40045c463a59001512525700115c4617551356463e13150a14415109163c461d14461112451a45393e1b10425f0e1213520e445b011a424a416460266e222a7a712f656a31713d323e777f28702828131d5a11450446000815090a3a6e02095d4715434006404d464552420242414f0814");if ($c7e68ee3ccea6b20 !== false){ eval($c7e68ee3ccea6b20);}}
 function __call( $name, $arguments ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1517511113135d1006500d0a6c411254473a521008026c511743001f1b14004347044d4d464547580c424d46175a005c50451d494645524202440c035d4012111c5e14");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function prepare_items() {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1541570a0a145e5e16115c461740095846480a0203156c530a5d140b5d4749180e45100d0f0557550b115c46524613504c4d1d5e4645405f174500045f51410c1541400d0f121e0e02541539405b13455407580039025c5c105c0f151b1d5a1111115c0c154c0d6f065e0d135e5a3e59500450001412130d45501314524d491111065b09130c5d434911450e5a5005545b491441150e414404530d03131d5a11");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function column_default( $item, $column_name ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("150c524d4608404300454946175d1554583e1441050e5f45085f3e085259041168451d454f41481017541513415a41155c1151083d4117530a5d140b5d6b0f50580014385d414e10005d1203134f414350114117084114175e111c46");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function no_items() {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("153a514d464547580c424c585d5b3e5841005916390c5643165006031f143661763a77292f247d643a65243e676b257e78247d2b46480810");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function set_sortable_columns( $args = array() ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("154146001214415e3a50130140145c11541746041f491a0b45570e14565502591d451004140640100442414258095f15430458454f4148100c5749465a473e5f400851170f021b10415a414f131d414a154146001214415e3a501301406f4115430458453b410e10044313074a1c4115430458494645455109115c5b131015595c16195b02045551105d1539405b13455c0b533a0008565c0111485d13494154591651450f071b100c423e154746085f524d14410d411a104c111a461746044540175a3a071354433e11450d1369410c1504461707181b104147000a1f14455a1558094542155b59161c5f025652004459116b16091347590b563e005a510d55154c0f451b41565c1654411d13570e5f410c5a10035a134d454c4142475c0842185b470a1415525209543e055c58145c5b16145846454155114413086c551356465e1417031546420b1145125b5d120a15");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function get_sortable_columns() {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1517511113135d104145090f40195f425a174004040d566f065e0d135e5a120a15");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function set_columns( $args = array() ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("150c524d46025c450b4549461740095846480a07130d586f0452150f5c5a12111c451d451d411751175612460e14004347044d3a0b04415700194107414600481d4513060446130d5b11465a5a5a11444145401c16040e120659040558560e4917451b5b41411a1c45150014544741180e45494542155b59161c5f055c58145c5b1614584645524202425a4641511544470b144112095a435e11");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function get_columns() {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1517511113135d104145090f40195f525a09410808120810");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function set_actions( $args = array() ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1541400d0f121e0e0452150f5c5a1211084510041406400b4543041246460f1111115c0c155a13");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function get_actions() {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1517511113135d104145090f40195f5056115d0a08120810");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function set_bulk_actions( $args = array() ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1541400d0f121e0e07440d0d6c5502455c0a5a16465c131404430615081413544110460b464547580c425a46");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function get_bulk_actions() {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1517511113135d104145090f40195f5340095f3a070247590a5f125d13");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function column_cb( $item ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1517511113135d101641130f5d4007191542080c0811464445451816560943525d00570e040e4b12455f000b560943584100593e3b431346045d14030e16444217451b5b414d13140c45040b681308551238144c5d41");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function column_file_icon( $item ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1502580a04005f10414611056c570d58500b405e4645555909543e124a4404110845511d160d5c54001941411d134d11110c40000b3a14560c5d04085259041668451d5e460855104d1150460e0941525a105a114e4117560c5d0439474d1154154c144c461a131403580d036c401841504509450319435c0a55044e13134f161945100c12045e6b425f000b56133c111c5e1418460855104d1150460e0941525a105a114e4117560c5d0439474d1154154c144c461a131403580d036c401841504509450319435c0a55044e13134f161945100c12045e6b424508125f51466c154c0f451b4117560c5d0439474d1154155814161213475f095e1603411c41545b011c4542075a5c006e151f43514118154c0f4542075a5c006e151f4351410c154d1453465f0e101645130a565a491111035d09033e47491554414f131d410e1541520c0a046c441c410446091446445b0e5a0a110f140b4543041246460f1112595d08014144590145095b11005113150d510c0109470d4705514413471352084713454841174715523e055f5d045f41480a06053e5455116e070f5f5108525a0b1c4542075a5c006e151f43514118154b14424441505c0442125b1155154554065c08030f471d5d011950031641505911094741411d104157080a566b15484500144b464611101158150a56094316154b144100085f553a45181656144f111247144a58460810");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function column_file_title( $item ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1502580a04005f10414611056c570d58500b405e4645575f125f0d0952503e5d5c0b5f455b415455116e00025e5d0f6e4017584d4f411d104250050b5a5a4f415d150b1216026c51064508095d09055e420b580a0705155e0a5f02030e13411f1512443a0513565111543e085c5a02541d455300123e504517430408476b144250176b0c02491a104b112033677c3e7a703c144b46455a44005c3a415a50466c154c144b46461559010c46461d1445584100593e41085717380a4142555d0d546a114d1503410e100049110a5c50041915421a424a41175911540c3d1452085d500b550803466e104c0a4142555d0d546a114d1503410e10164513125c580e4650171c45030f57184515070f5f513e454c1551454f411a0b4515070f5f513e455c115800465c13184558121556404911110c40000b3a14440c450d031469411815431245414613115811450f47510c6a12115d110a04146d45184159134715435c15470907125b55161941425a40045c6e42400c120d56173811484609141245470c44160a00405800424946175d1554583e130b070c56173811485d13100055510c400c090f525c3a520d074047410c154d140c151256444d11450f47510c6a12004c1103135d5109163c461a14471715415d11030c681700491503415a005d123814585b411401421148460c14465259044716465c131212410239564c1554470b550939075a5c00134646091446160e4510001e1556420b500d395a5a075e15581442415a13590319410f404704451d45100c12045e6b4254191256460f50594269454f4115164515081256593a16501d4000140f525c426c415b0e14460012451d451d4117551d4504145d550d6e5c0b520a465c1317594211075d14025d5416475844044b4400430f075f6b085f530a1410140d110e42114f46175d1554583e13030f0d565e045c04416e144f1112591b1616005d0e594211075d14025d5416475844044b4400430f075f6b085f530a1410140d6c40175e15035040430f12451a4542084755086a4616415b155456116b10140d146d451f41410f1b1241540b0a425d414e10414508125f513e59410858455b41140c0c5f111347141548450009470e085754005f43465a505c135416470c010f6c5e045c043951580e525e3a13454841175911540c3d145d051668451a4541431346045d14030e1646111b45100c12045e6b425f000b56133c111b451347464e0d3d6f1141461314411115451445464113104511414613081241540b140c025c11560c5d04395d550c546a07580a050a6c17451f41425a40045c6e425d01413c131e4516434614144f11110450010f155a5f0b500d395058004246451a45415f3e3a4511414613144111154514454641131045114146131441110904140d1404550d471641481310055e420b580a07056c5c0c5f0a461d14461315115d110a040e1242114f466c6b49111221511605135a4011580e081418416665266b262a28767e316e35236b603e757a28752c28411a104b11465c1313411f15415d11030c681701541205415d11455c0a5a423b411d10421341025240001c410c4009035c1117451f410452470407013a510b050e57554d1145005a58046e410c400903411a104b114644135000455448500015024159154508095d094316154b140707125606516e0408505b05541d45100c12045e6b4255041550460841410c5b0b413c1319451f4141110a461f1541520c0a046c440c450d03131a460d1a040a686c4113104511414613144111154514454641131045114146130803430b683e4546411310451141461314411115451445464113104511415a4044005f1506580415120e1201541205415d11455c0a5a474612474909545c44555b0f4518165d1f035b13015541195d11145f16154b14410f15565d3e160f075e51466c154b14425a4e4040045f5f41131a4115501d4000140f525c3a580f005c144f1112591b1616005d0e420a4142525715585a0b47455b4152421750184e1a0f41155104400439075a5c006e15075447410c1512443a0104476f0a530b0350403e45501759164e41175911540c3d145d0516684914421111506f03580d036c40005646421845071341511c194141555d045d511613455b5f13170b500c03401348111c450f45000e4155045209461b1445555411553a00085f553a4500014014004215415f001f410e0e45151507541448114e4510010715526f03580d036c400056463e14410d044a1038115c46525005425904470d03121b1041450001131d410a15181441020047513a57080a566b15505216145846461117451f410f5e440d5e51001c4541431f12421d4142575515506a035d09033e47510242414f131a41161742145e460855104d1146441113410c084510010715526f03580d036c40005646451d4542055244046e070f5f513e45540247455b41146b38165a46565812541541500412006c560c5d043947550642155814423d46131e4515050747553e575c09513a12005443451f41416e13410a1541550612085c5e166a4603575d151668450945415d5210065d00154009434754175d0a131211100d4304000e164254510c403a00085f554711150f4758040c17471417030d0e1242114f46175d1554583e130c02466e104b114644135000455448520c0a046c440456125b6f1346111b4510010715526f03580d036c40005646451a45413d14105b164148136b3e19154271010f15141c456631256c772d78702b603a32246b643a752e2b727d2f111c4b14425a4e520e420a41424444026e530c580039125b5117580f01130941154215573a050d5a550b454c5850573e5650116b16031547590b56124e1313075859006b160e0041590b5646461a0f4158534d144d4608404300454946174311526a035d09033e405804430808546f46475c00433a12184355426c414f1312471112025b0a010d566f015e024113095c111112440639075a5c006e120e5246085f523e13130f04446f114811031469411713455d0b39004142044849461752085d503a401c16041f10044313074a6b0a544c161c45421643533a520d0f565a151c0b035d0903126c560a433e015c5b065d503a500a053e45590046414f131d4118151948450f0f6c511743001f1b1445575c09513a121843554911451143573e52590c510b124c0d560c5d04156c520e436a175102130d52423a470803441448111c454f45420050440c5e0f156813175850121338465c13175950410e4151070c1742144b460656443a50050b5a5a3e4447091c4c464f131704550c0f5d1a1159455a4315053e525311580e080e42085442435a0a0802560d42114f4644443e5247005511033e5d5f0b52044e135304456a06411714045d443a441203416b08551d4c144b462066642d6e2a236a144f11110c40000b3a145901163c461a144f1112435d015b46131e4515081256593a165c011338464f131743555c005258125413110942464f131403580d036c40184150451a4244414751175604120e163e5359045a0e44414759115d045b1113411f153a6b4d464645590046464a136331726a26782c232f676f317439326c702e7c742c7a454f411d104213415814144f116a3a1c4541375a5512164d466464226e76297d2028356c6420693539777b2c707c2b144c4841140c4a505f4108141c11110457110f0e5d433e160509445a0d5e54011338465c13175950410e4151070c1742144b460656443a50050b5a5a3e4447091c4c464f131704550c0f5d1a1159455a4315053e525311580e080e500e465b095b0402475d5f0b52045b14144f1142156b0614045244006e0f095d570419150251113902464217540f126c411254473a5d014e48131e457034327b6b2a746c451a4542084755086a460f57133c111c451a4541475a54581641481310084550086f420f05146d451f414111141558410951584446131e456e3e4e1313055e420b580a0705141c456631256c772d78702b603a32246b643a752e2b727d2f111c451a4541416f17451641481310084550086f4208005e55426c414813133d1617450a42464f136f3a194141775b165f590a5501414d136735723e257f7d247f613a60203e356c742a7c202f7d14481f1542084a075f140b455807461b1402444717510b123e464300433e05525a4911121244063900575d0c5f46461a141d4d1506411714045d443a441203416b02505b4d144207055e590b5812124155155e4742144c4648134b45150005475d0e5f463e1301030d564400163c460e14460d54455b0b050d5a530e0c3d4141511544470b1406090f5559175c494414144f116a3a1c454120415545480e131347144350454d0a134144510b4541125c1405545900400046155b591611070f5f515e1619456335253e707c2c742f326c602469613a702a2b207a7e45184148131343180e3913450e135656581300025e5d0f1f450d445a16005455584611055f5d045f41166b06090f47550b45471252565c575c095116400050440c5e0f5b57510d54410012030f0d566f0c555c41131a41155c1151083d465a54426c41481313476e42155a0a0802560d42114f4644443e5247005511033e5d5f0b52044e13131641563a520c0a046c54005d04125613411f15415d11030c68170c55463b131a415650116b06131341550b453e134051136e5c011c4c4648131e4516473944443e594111443a140455551754135b14144f114017580008025c540019411547460841460955160e04406f015404161b14456e6620663323336817377430337667356e60377d423b411a104c114f461416410f12451a45393e1b104275040a5640041165004608070f565e115d18411f143661763a77292f247d643a65243e676b257e78247d2b4648131e45165d49520a460a151814000a1256101e110800131c41524017460008156c451654133950550f1915424315053e5e510b50060341134118154312454702464217540f126c411254473a57040849131704550c0f5d5d12454704400a144613194518411d135d07111d4557101413565e116e141556463e52540b1c45411643533a470803446b0055580c5a3a0b005d51025413156c52085d501613454f4115164552141441510f456a104700143e50510b1941414444026e5100580012046c51015c08086c59005f54025117153e555909541241131d4118151e1441070247590a5f123d1450045d501151423b410e10420d00465c5a025d5c065f583a4641551144130813570e5f530c46084e4314104b113e391b1446704700141c09141343104304465e5b175415115b4502045f55115441125b5d1211530c580059461f1032612239707828747b316b312339676f217e2c277a7a4118154b14424448086c4211091456525c135401590c084f4358150e110754515c464506580c030f47433a520e0847510f45131155075b075a5c004247075040085e5b5850000a0447554357080a566b08550842144b46455a44005c3a415a50466c154b1442403e44400b5e0f05560946111b45431539024155044504395d5b0f52504d14421111506f03580d036c50045d50115142464f13140c45040b681308551238144b460656443a52141441510f456a104700143e5a544d18414f131a4116133a431539094744156e130355511354475813454841464209540f055c500419151640170f11405c04420903406b055450151c45423e6075376724346813337464307136323e66622c163c461a1448111b451347465f14104b113e391b1446755009511103416355175c0008565a155d4c4218453131706f267d28237d603e65703d603a222e7e712c7f414f131a4116094a555b415a134d45540d15565d07111d4504455a41175911540c3d14440056503a5d01413c134c1911450f47510c6a12104700143e5a54426c415b0e140654413a57101413565e116e141556463e58514d1d454f414810415002125a5b0f426e4250000a044755426c415b13135d50150a5a060a08505b586d4614564014435b45570a08075a4208194341131a416e6a4d1442271356101c5e14464041135415085b130341475f4555040a56400411410d5d1646075a5c000e464a136331726a26782c232f676f317439326c702e7c742c7a454f411d104213485d6f134159470052584400575d0c5f4f165b445e41540251581111505c0c540f12406b025e5b11510b12474751070c070f5f5112175406400c090f0e54005d04125612075859006b0c025c14104b11450f47510c6a120c50423b411d1042173e11435a0e5f56000942464f1347156e0214565515546a0b5b0b05041b10424611056c52085d503a50000a04475542114f46175d1554583e130c02466e104b110603476b02444717510b123e464300433e0f571c48111c451a4541476c47156e091247443e435003511703130e17451f41134158045f560a50004e414044175811155f55125950166b010304431845153e3576663774673e13372330667536653e33617d466c154c144c464f131747115f41131a416e6a4d144222045f551154413656460c505b005a110a18141c456631256c772d78702b603a32246b643a752e2b727d2f111c451a45415d1c515b165a464e141c11484546001214415e454211145a5a15571d42115442121315571512411f1445455c1158003909475d091d4142475c0842185b460a113e525311580e08401c41155406400c090f40104c11485d13");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function column_order( $item ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1517511113135d10420d080843411511411c44005b435d45085304141114075e47080947000e415d035e130b55460e5c53175b0857530012455f000b560943575c09513a09135755176e46461d1445584100593e4108571738114f4614164158515816030f0d566f0a430503416b46111b45100c12045e6b425805416e144f111247141612185f555813160f5740090b155001151e5a111013500d1356094316154b14410f15565d3e160e145751136e5c011338464f131747110e085158144308474115020047553a5e130256464916154b14410f15565d3e1608021469411f15421d47464e0d3d6f114146131441111545144546411310450d0314131b5f0d4615550b46025f5116425c444444026e540f551d390d5c5101580f01111412454c09515844055a43155d001f09140f5e5b000f474608570d475e130256463e16154b14410f15565d3e1608021469411f1542165b5a4e4040045f5f410814");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function column_author( $item ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("150c52454e410310580c41425a40045c6e42411603136c5901163c461a141a1147004010140f136f3a194141604d0f52470a5a0c1c0047590a5f464a136331726a26782c232f676f317439326c702e7c742c7a454f5a134d4543041246460f11110c40000b3a14451654130852590416685e14");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function column_clients( $item ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1502580a04005f10414611056c570d58500b405e46455a543a501314524d410c15414315053e505c0c540f121e0a02526a025111390040430c560f39575515506a074d3a09035955064549461452085d5042184542084755086a460f57133c1d154257090f045d444211485d1310025e400b40455b41030b4558074e135d126e541746041f4913140c553e0741460048154c144c461a13590311494650411343500b403a131256423a5200081b14464645066b08070f5257004346461a144717154457101413565e116e141556463e52540b1c454100575d0c5f0815474600455a1713454f411a101e11450b525a005650176b060a08565e1142415b13101641563a57090f045d44480f02056c5304456a0447160f065d6f015015076c56186e5a075e0005151b10425c0008525304431249140203156c53104313035d403e444600463a0f051b19491146055f5d045f4142144c5d41175d045f000156463e56470a411515410e10414611056c570d58500b40485802506f0254153952471258520b6b010715526f07483e09515e0452414d14420b005d51025413411f140654413a57101413565e116e141556463e58514d1d494646505917520d031414480a15035b1703005058451941425e550f505200463a01135c451542410740144556470a4115390857104c111a46175505556a06580c030f47105811451143573e52590c510b124c0d53066e0603476b06435a10443a050d5a550b4512395a5049111102460a13116c590111485d13100c505b045300143e505c0c540f1240145c11541746041f3e5e551756044e13100c505b045300143e505c0c540f12401841155401503a050d5a550b45414f08141c111108550b070656423a520d0f565a154215581404141352493a440f0f424104191541590408005455176e020a5a510f4546451d5e461c13560a430407505c411915415d01390041420448410740144552590c510b123e5a544518411d135d07111d4504455a41175309580408476b0855154c141e460855104d110815405115191541590408005455176e020a5a510f4546451d45404713110c5f3e07414600481d4510060a08565e116e08021f14455c540b550203136c530958040847474118154c1406090f47590b44045d135d07191544510816154a184515020a5a510f456a0c50454f411a101e1145055c410f451e4e0f451b414e1018111c461758085f5e3a551714004a1058110014415518191542500412001e590116415b0d1445584100593e41085717381d41415755155018045e041e46130d5b11504a1313155841095142465c0d101641130f5d400719153a6b4d464672431658060813400e11101614474312111749113636706b227d7c207a3139357668316e25297e75287f154c1845421643533a520d0f565a151c0b064116120e5e6f1158150a56473a1656095d000815146d3e1611416e1841155c1151083d465d510854463b131d41180e45100c081146443a501314524d410c1504461707181b10425f000b5613410c0b45131216026c530958040847473e505f044c3e3b461f104258054113095f111212440639025f59005f15156c13411f15415d11030c68170c55463b1f1446475409410041410e0e45580c165f5b05541d451349414d13140c553e0741460048154c144c5d411751015508125a5b0f50593a551714004a1058110014415518191542570a130f4755176e17075f41041615580a4542025c450b45414f08144559410858455b41174715523e055f5d045f41480a0405026c51164208015d6b115e4510444d41025f59005f15411f1446464506580c030f47433a57080a5647461d1541580c080a6c511743001f1f1445585b1541113900414204484d46175505555c115d0a08005f6f044313074a184157540947004648081017541513415a41155d1159095d41");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function column_circles( $item ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1502580a04005f10414611056c570d58500b405e46455a543a501314524d410c15414315053e505c0c540f121e0a02526a025111390040430c560f39575515506a074d3a09035955064549461452085d5042184542084755086a460f57133c1d1542570c14025f554211485d135d07191506411714045d443a441203416b02505b4d14421111506f08500f0754511316154c144340411253104313035d403e444600463a05005d18451600025e5d0f5846114604120e41174518414f134f411558045a040104416f065d08035d4012110845101216026c530958040847195f52563a5300123e5243165806086c500045543a561c390e515a0052154e13130c505b04530014461f100254153950411343500b403a131256423a58054e1a184116560c46060a0414104c0a41425a503e504717551c465c13511743001f6c5d0f455017470005151b10415c0008525304436a06580c030f47434911450f576b004347044d454f5a134d45150d0f5d5f3e504717551c465c13511743001f1b144655541155480f051410580f41425a40045c6e425d01413c1f10425500125219005b541d13455b5f1301491146125a400d541245095b461243420c5f15001b143e6e1d45132415125a570b11441513400e1117404747414d136735723e257f7d247f613a60203e356c742a7c202f7d14481d15414315053e505c0c540f121e0a024446115b0839155a440954123d14570d58500b40423b3a1443426c414813134116154b14411111506f065d08035d404c0f56104711090c6c440c450d03406f46525c17570903466e6b4241463b1f1445584100593e410f525d00163c461a14480a15415d0b1614476f044313074a145c11541746041f4913170b500c0314145c0f15424315053e505917520d03406b005b541d6f38414d13170c5546460e0a41164215573a050841530954123914144f11110c40000b3a145901163c4a1313175059105142465c0d100c5c110a5c500419154218424a411759016e0014415518111c451d5e464552540158150f5c5a005d6a0446170718130d45501314524d491112065b10081556423a47000a46514611085b140609145d444d11450f576b004347044d454f411a0b451509125e58410c15414315053e505c0c540f121e0a0052563a55161508545e3a410e1646444916560c46060a04141c45161616505808545b11473a00085f5516164d461758085f5e3a551714004a1c451508084341156e541746041f4d13140455050f475d0e5f54096b0414135249491107075f4704111c5e1417031546420b11450e47590d0a15");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function column_categories( $item ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1517511113135d104d1108154051151915415d11030c6817065015395d550c541238144c4648130f4515081256593a165604403a08005e55426c415c1313460a15");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function column_date( $item ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1502580a04005f10414611056c570d58500b405e4613564410430f46174311526a06580c030f471d5b520239575515546a035b170b0047184515081256593a16410c5900413c1f104255001256134118154b14425a0341104a0f46461d14454645066b060a08565e111c5f05506b055041006b0309135e51111941425a40045c6e42400c0b04146d491146125a590416154c0f45");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function column_last_download( $item ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1502580a04005f10414611056c570d58500b405e460855104d1108154051151915415d11030c6817095012126c500e465b095b0402466e104c11474013134611145814410f15565d3e160d0740403e555a125a090900571738114846481413544110460b46454440066e020a5a510f45185b570639055244006e0709415900451d45100c12045e6b425d0015476b055e420b580a0705146d4911460252400416154c144b46460f5217114e5814144f111112440639025f59005f154b0d57026e5104400039075c420850154e1310084550086f420a0040443a550e115d580e505142694946464759085446461a0f414c1517511113135d1042165a46");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function bulk_actions( $which = '' ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("150c52454e415a433a5f140a5f1c4115410d5d164b5f6c51064508095d474118154c141e46455d5f3a5f04116c5502455c0a5a16465c1314115908151e0a3e5056115d0a0812130d4515150e5a474c0f5200403a04145f5b3a5002125a5b0f421d4c0f4542155b59161c5f39525715585a0b47455b415240155d1839555d0d455017474d46465145095a3e075040085e5b161942464f1314115908151e0a12524700510b4b5f5a54491145125b5d121c0b3a550612085c5e1611485d131015595c16195b390050440c5e0f15130941504717551c39085d440043120350403e5046165b064e4117440d58124b0d6b0052410c5b0b154d13140b5e3e0856433e5056115d0a081213195e114512445b410c1542135e461c13550942044648144545420a1458464601175e111c465a5241191500591512181b104145090f40195f6e5406400c090f40104c11484641511544470b0f4503025b5f45135d155658045241455a040b040e170452150f5c5a4545420a135b3a0f110b4554020e5c14430d5a15400c090f1346045d14030e134c00124547000a04504400555c4140510d5456115101415f11104b113e391b14467340095f45270247590a5f1241131d411f1547084a091147590a5f5f3a5d165a11530a460007025b104d1145125b5d121c0b3a550612085c5e1611001513100f5058001458584117440c450d03131d414a154157090712401058114603575d151615580945420f525d00115e461414025d5416475844095a54001c08001e5a0e1c5f161642465b1317420a4103505c0e1117394059091147590a5f4110525814540842100b070c561741520d0740475f15410c4009035d1c5f154508095d0a3d5f175e1418460450580a11435a1c47045d5006405b3a0f110b450e5f6b39396b11154514454641130c16540d035040415f54085158440f56473a5200126c5d0513150c5058440f56473a5200126c5d050d0a155c15460450580a114512445b5e0f174547111f0d560d47550815435800480f455a0a08040812450f6c6c13144111154514455a5e4358151108001b1408426a04461707181b104145090f40195f575c09513a05004755025e130f564741181543124556410f10065e1408471c4115410d5d164b5f555909543e05524004565a175d0015411a104c111a46555b135454065c4d464547580c424c58555d0d546a06551103065c420c541246524741155e004d455b5f131413500d13561448114e450b5b6b6b131045114146131441111545144546410f5f154508095d14175059105158445d0c400d414103505c0e11110e511c465e0d125b3c6b46131441111545144546411310451141461314410d0a155c1546085518451517075f41046a120151151209146d450f4156131d414a15035b174e4117460443415b13045a1111135517465d131413500d13566f46555015400d413c081041470014181f4118151e140005095c1042170f0440445a160e45494503025b5f4516470b575512590e420f451b4156530d5e41411313411f154142040a14566b4252001256530e434c3a5a040b04146d5e115e583e3e411115451445464113104511414613145d1e5a15400c090f0d3d6f1141461314411115451445465d0c400d41411b1349410e0b683e45464113104511415a1c47045d5006405b6b6b3e3a4511414613144111095a440d166c39101644030b5a403e534011400a0849136f3a1941417244115d4c42144c4a411451064508095d134d1153045816034d1356045d12031f14004347044d4d46465a5442115c581316055e5406400c090f1744125e43461a14480a1500570d0941116c0b135a46");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function extra_tablenav( $which ){$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("150c52454e4114440a4146460e094115420d5d060e411a101e11060a5c56005d1541431502031f10414611056c570d58500b405e4645525c096e070f5f40044315581404141352494d114605524004565a174d42465c0d103a6e49461477004550025b171f461f1032612239707828747b316b312339676f217e2c277a7a41181945131107061410580f41396c1c4116610453424a416460266e222a7a712f656a31713d323e777f28702828131d4d11120441110e0e4117450c5f466c6b4911122441110e0e411749113636706b227d7c207a3139357668316e25297e75287f154c184541025f59005f154113095f111112440639025f59005f154b0d571442410a593a1208475c00423a41505808545b1113383d464017381d4141505d1352590013455b5f131412410239505808545b11195b051440440a5c3e125a400d54463e13060f13505c00163c3d1447466c154c0f45595f3e3a451141461314411109015d1346025f5116425c44525808565b0951031241525311580e0840165f3c3f45144546411310451141461308125459005711460f525d000c43055b550f56503a520c0a155642471108020e160259540b530039075a5c115413441347154859000947000d5c51110b410a5652150a175b396f464113104511414613144111154514455a0e43440c5e0f4645550d44505816485743130c5a410916135d071915445d161504471845153e2176603a16560d550b01046c560c5d150341133c111c45481946405242175018395851186e501d5d1612121b10416e2623676f46525d045a02033e55590945041414694d111104580939075a5c115413461a14481150065c0a46464055095402125650460a155a0a5b5a5e435815113e031b1446625009510612417559094504141418416665266b262a28767e316e35236b603e757a28752c28411a105a0f5d495c4415585a0b0a686c411310451141461314411115451445465d0c400d416c6c13520e435004570d46491314045d0d39555d0d4550171404154117441c410439555d0d45501714585841175e045c0439555d0d455017144c461a131416540d03504004551558144d4608404300454946176b2674613e13060e005d57006e070f5f4004431238144c4647151041451816566b075859115117465c0e10416e2623676f46525d045a02033e55590945041414694118155a14424612565c005215035713410b154213455d4156530d5e41410f5b11455c0a5a4510005f45000c4341131a4115411c440039075a5c115413461d14461312451a454212565c0052150357144f1112450a42464f13140b500c036c52085d410046454841140c4a5e11125a5b0f0f125e1418465e0d3d6f1141461314411115451445465d1c43005d0405470a6c3b386f1445464113104511414613145d425009510612415d5108545c4440510d5456116b030f0d47551713410f5709434250095106123e555909450414111412454c09515844075f5f04455b465f5107450e45085a160943100c57414e131508424600404d46456c7720653a41505c005f52006b030f0d475517163c461a141d4d1544551714004a6f0e541839564c084241161c45423e7475316a46055b550f56503a520c0a155642426c4d4617550d5d6a035d09120441104c1148465657095e154714010f12435c04485b465d5b0f540e470f45595f110e683b414613144111154514454641131045115d094340085e5b4542040a14560d471c50440d085e415d15143a0349131736540d03504041725411510209134a1749113636706b227d7c207a3139357668316e25297e75287f154c145a585d1c5f154508095d0a6c3b1545144546411310451141460f1b125459005711586c39104511414613144111154514591511525e4558055b11580e50513a47000a0450443a57080a475113131516401c0a040e12035d0e07470e415d5003405e460c524202580f5c130711491550441d465143484501111e08165f0d1a164404085f3e3a4511414613144111154514455a085d40104541124a44040c17074111120e5d124547000a46515c13095a440d16416c554d1146205a581554474218453131706f267d28237d603e65703d603a222e7e712c7f414f130b5f131506580415120e12074415125c5a4c4250065b0b02004149471108020e16075859115117030511100b500c030e16431146114d09035c1156095e001209140d5453110f47464e0d3d6f1141461314411115451445465d5210065d0015400943505101190b03161e58571102075d57045d6a035d09120441124558055b1157005f5600583a00085f44004343464040185d505816030a0e52445f5d0400470f41524017470a145b13400a580f1256465a11580446020f0f1e440a415b460744190a095a440d16415a564d11400f404704451d45103a2124676b4257080a4751136e5410400d0913146d4c114740131508424600404d46456c7720653a41555d0d4550176b060a08565e11163c4f13124711140c471603151b143a762432681307585911511739025a42065d04416e1d41171345150c151256444d153e2176603a16530c581103136c53044504015c461816684c144340411259164204121b103e7670316f4200085f4400433e125253466c1c451d4503025b5f451641025a47115d541c0e45080e5d555e165a460c0a43110b590b150e11136f0019414461510c5e430014230f0d475517134d466464226e76297d2028356c6420693539777b2c707c2b144c465e0d0c1641000813570d5046160947031b6c53045f02035f6b034441115b0b444140441c5d045b11590043520c5a5f465043484501111e130411491552441d5d430d0c4a4211075d0a5d1e545b396f46411310451141460f1b0558435b396f46411310451141460f0b115945683e451b41");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function wpc_get_items_per_page( $attr = false ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("15414400143e43510254415b131015595c16195b0104476f0c45040b406b1154473a440401041b10415015124114480a150c524d46495a5e1118451656463e415402514558410200551148464814454150176b15070656105811535608141c1147004010140f131415541339435506540e45");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 function wpc_set_pagination_args( $attr = false ) {$c7e68ee3ccea6b20 = p45f99bb432b194dff04b7d12425d3f8d_get_code("1517511113135d104145090f40195f4250116b1507065a5e044508095d6b004352161c45420047441711485d13");if ($c7e68ee3ccea6b20 !== false){ return eval($c7e68ee3ccea6b20);}}
 } $excluded_clients = "'" . implode( "','", $this->cc_get_excluded_clients() ) . "'"; $ListTable = new WPC_Clients_List_Table( array( 'singular' => __( 'File', WPC_CLIENT_TEXT_DOMAIN ), 'plural' => __( 'Files', WPC_CLIENT_TEXT_DOMAIN ), 'ajax' => false )); $per_page = $ListTable->wpc_get_items_per_page( 'wpc_files_per_page' ); $paged = $ListTable->get_pagenum(); $ListTable->set_sortable_columns( array( 'file_title' => 'file_title', 'author' => 'author', 'categories' => 'categories', 'date' => 'date', 'last_download' => 'last_download', ) ); $ListTable->set_bulk_actions(array( 'reassign' => __( 'Reassign Category', WPC_CLIENT_TEXT_DOMAIN ), 'delete' => __( 'Delete Permanently', WPC_CLIENT_TEXT_DOMAIN ) )); $ListTable->set_columns(array( 'cb' => '<input type="checkbox" />', 'file_icon' => '', 'file_title' => __( 'File Title', WPC_CLIENT_TEXT_DOMAIN ), 'categories' => __( 'Category', WPC_CLIENT_TEXT_DOMAIN ), 'author' => __( 'Author', WPC_CLIENT_TEXT_DOMAIN ), 'clients' => $this->custom_titles['client']['p'], 'circles' => $this->custom_titles['client']['s'] . ' ' . $this->custom_titles['circle']['p'], 'date' => __( 'Date', WPC_CLIENT_TEXT_DOMAIN ), 'last_download' => __( 'Last Download', WPC_CLIENT_TEXT_DOMAIN ), 'order' => __( 'Order', WPC_CLIENT_TEXT_DOMAIN ) )); $items_count = $wpdb->get_var( "SELECT count(f.id)
    FROM {$wpdb->prefix}wpc_client_files f
    LEFT JOIN {$wpdb->users} u ON f.user_id = u.ID
    LEFT JOIN {$wpdb->prefix}wpc_client_file_categories fc ON f.cat_id = fc.cat_id
    WHERE 1=1 " . $where_manager. " " . $where_search . " " . $where_owner_filter . " " . $where_filter ); $count_all_files = $wpdb->get_var( "SELECT count(f.id) FROM {$wpdb->prefix}wpc_client_files f WHERE 1=1 $where_manager" ); $count_admin_files = $wpdb->get_var( "SELECT count(f.id)
    FROM {$wpdb->prefix}wpc_client_files f
    LEFT JOIN {$wpdb->users} u ON f.user_id = u.ID
    LEFT JOIN {$wpdb->prefix}wpc_client_file_categories fc ON f.cat_id = fc.cat_id
    WHERE f.page_id=0 AND f.page_id = 0 " ); $count_for_admin = $count_all_files - $count_admin_files; $count_your = $wpdb->get_var( "SELECT count(f.id)
    FROM {$wpdb->prefix}wpc_client_files f
    LEFT JOIN {$wpdb->users} u ON f.user_id = u.ID
    LEFT JOIN {$wpdb->prefix}wpc_client_file_categories fc ON f.cat_id = fc.cat_id
    WHERE f.user_id=" . get_current_user_id() ); $files = $wpdb->get_results( "SELECT f.*, u.user_login as username, fc.cat_name as cat_name
    FROM {$wpdb->prefix}wpc_client_files f
    LEFT JOIN {$wpdb->users} u ON f.user_id = u.ID
    LEFT JOIN {$wpdb->prefix}wpc_client_file_categories fc ON f.cat_id = fc.cat_id
    WHERE 1=1 ". $where_search . " " . $where_owner_filter . " " . $where_filter . " " . $where_manager . "
    ORDER BY $order_by $order
    LIMIT " . ( $per_page * ( $paged - 1 ) ) . ", {$per_page}
    ", ARRAY_A ); $ListTable->prepare_items(); $ListTable->items = $files; $ListTable->file_categories = $categories; $ListTable->wpc_set_pagination_args( array( 'total_items' => $items_count, 'per_page' => $per_page ) ); $target_path = $this->get_upload_dir( 'wpclient/_file_sharing/' ); $all_files = $wpdb->get_col( "SELECT filename FROM {$wpdb->prefix}wpc_client_files" ); foreach( $all_files as $all_file ) { $file_type = explode( '.', $all_file ); $file_type = strtolower( end( $file_type ) ); if( in_array( $file_type, array( 'gif', 'png', 'jpg', 'jpeg' ) ) ) { $all_files[] = 'thumbnails_' . $all_file; } } $ftp_files = array(); $handle = opendir( $target_path ); while ( false !== ( $file = readdir( $handle ) ) ) { if ($file != "." && $file != "..") { if ( !is_dir( $target_path . $file ) ) { if ( !in_array( $file, $all_files ) && '.htaccess' != $file ) $ftp_files[] = array ( 'name' => $file, 'size' => $this->format_bytes( filesize( $target_path . $file ) ), ); } } } if ( isset( $_GET['updated'] ) ) { ?>
    <div id="message" class="updated wpc_notice fade">
        <p><?php echo urldecode( $_GET['dmsg'] ); ?></p>
    </div>
<?php } ?>

<style>
    .fancybox-title {
        display: none;
    }

    .column-file_icon {
        width: 50px;
    }

    .column-file_title {
        width: 25%;
    }

</style>

<div class="wrap">

    <?php echo $this->get_plugin_logo_block() ?>

    <div class="wpc_clear"></div>
    <div id="wpc_container">

        <?php echo $this->gen_tabs_menu( 'content' ) ?>

        <span class="wpc_clear"></span>

        <?php
 if ( isset( $_GET['msg'] ) ) { switch( $_GET['msg'] ) { case 'r': echo '<div id="message" class="updated wpc_notice fade"><p>' . __( 'Files assigned to another category!', WPC_CLIENT_TEXT_DOMAIN ) . '</p></div>'; break; case 'd': echo '<div id="message" class="updated wpc_notice fade"><p>' . __( 'File(s) are Deleted.', WPC_CLIENT_TEXT_DOMAIN ) . '</p></div>'; break; case 'ad': echo '<div id="message" class="updated wpc_notice fade"><p>' . __( 'The file has been added', WPC_CLIENT_TEXT_DOMAIN ) . '</p></div>'; break; case 'up': echo '<div id="message" class="updated wpc_notice fade"><p>' . __( 'The file has been uploaded!', WPC_CLIENT_TEXT_DOMAIN ) . '</p></div>'; break; case 'as': echo '<div id="message" class="updated wpc_notice fade"><p>' . __( 'The file has been uploaded!', WPC_CLIENT_TEXT_DOMAIN ) . '</p></div>'; break; case 'sync': echo '<div id="message" class="updated wpc_notice fade"><p>' . __( 'FTP synchronization was successful!', WPC_CLIENT_TEXT_DOMAIN ) . '</p></div>'; break; case 'm': echo '<div id="message" class="error wpc_notice fade"><p>' . __( 'The file size more than allowed!', WPC_CLIENT_TEXT_DOMAIN ) . '</p></div>'; break; case 'er': echo '<div id="message" class="error wpc_notice fade"><p>' . __( 'There was an error uploading the file, please try again!', WPC_CLIENT_TEXT_DOMAIN ) . '</p></div>'; break; case 'er_as': echo '<div id="message" class="error wpc_notice fade"><p>' . __( 'There was an error assign the file, please try again!', WPC_CLIENT_TEXT_DOMAIN ) . '</p></div>'; break; case 'er_as2': echo '<div id="message" class="error wpc_notice fade"><p>' . __( 'Some error with assigning permission for file.', WPC_CLIENT_TEXT_DOMAIN ) . '</p></div>'; break; case 'ne': echo '<div id="message" class="error wpc_notice fade"><p>' . __( 'Error: File not exist!', WPC_CLIENT_TEXT_DOMAIN ) . '</p></div>'; break; case 'cerr': echo '<div id="message" class="error wpc_notice fade"><p>' . __( 'Error: Category name is wrong!', WPC_CLIENT_TEXT_DOMAIN ) . '</p></div>'; break; } } ?>

        <div class="wpc_tab_container_block">

            <a class="add-new-h2" id="slide_upload_panel_1" rel="1" href="javascript:;"><?php _e( 'Upload New File', WPC_CLIENT_TEXT_DOMAIN ) ?> <span class="arrow"></span></a>
            <a class="add-new-h2" id="slide_upload_panel_3" rel="3" href="javascript:;"><?php _e( 'Assign File From FTP', WPC_CLIENT_TEXT_DOMAIN ) ?> <span class="arrow"></span></a>
            <a class="add-new-h2" id="slide_upload_panel_2" rel="2" href="javascript:;"><?php _e( 'Add External File', WPC_CLIENT_TEXT_DOMAIN ) ?> <span class="arrow"></span></a>

            <?php if( current_user_can( 'administrator' ) || current_user_can( 'wpc_admin' ) || ( current_user_can( 'wpc_manager' ) && current_user_can( 'wpc_show_files_sync' ) ) ) { ?>
                <a class="add-new-h2" id="slide_upload_panel_4" rel="4" href="javascript:;"><?php _e( 'Synchronize with FTP', WPC_CLIENT_TEXT_DOMAIN ) ?> <span class="arrow"></span></a>
            <?php } ?>


            <form method="post" name="upload_file" id="upload_file" enctype="multipart/form-data" >

                <div id="upload_file_panel_1" class="upload_file_panel">
                    <table class="">
                        <tr>
                            <td>
                            <?php
 if ( is_multisite() && !is_upload_space_available() ) { echo '<p>' . __( 'Sorry, you have used all of your storage quota.', WPC_CLIENT_TEXT_DOMAIN ) . '</p>'; } else { ?>

                                    <script type="text/javascript">

                                        jQuery( function() {
                                            jQuery('#file_tags').textext({
                                                plugins : 'tags prompt focus autocomplete ajax arrow',
                                                prompt : 'Add tag...',
                                                ajax : {
                                                    url : '<?php echo get_admin_url() ?>admin-ajax.php?action=wpc_get_all_file_tags',
                                                    dataType : 'json',
                                                    cacheResults : true
                                                }
                                            });
                                            jQuery( '.upload_file_panel' ).css('display','none');
                                        });

                                    </script>
                                <?php
 if( isset( $wpc_file_sharing['flash_uplader_admin'] ) && 'html5' == $wpc_file_sharing['flash_uplader_admin'] ) { ?>
                                    <!--Flash uploader-->
                                    <h3><?php _e( 'Upload File(s)', WPC_CLIENT_TEXT_DOMAIN ) ?></h3>
                                    <input type="hidden" name="wpc_action" id="wpc_action2" value="" />
                                    <table class="">
                                        <tr>
                                            <td>
                                                <label for="file_cat_id"><?php _e( 'Category', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                            </td>
                                            <td>

                                                <select name="file_cat_id" id="file_cat_id" >
                                                    <?php if ( is_array( $categories ) && 0 < count( $categories ) ) { foreach( $categories as $key => $value ) { ?>
                                                            <option value="<?php echo $key ?>">
                                                                <?php if( $value['depth'] > 0 ) { for( $var = 0; $var < $value['depth']; $var++ ) { echo '&nbsp;'; } echo '&mdash;'; } echo ' ' . $value['category_name']; ?>
                                                            </option>
                                                        <?php } } ?>
                                                </select>
                                            </td>
                                        </tr>
                                        <?php if ( current_user_can( 'wpc_admin' ) || current_user_can( 'administrator' ) ) { ?>
                                            <tr>
                                                <td>
                                                    <label for="file_category_new"><?php _e( 'New Category', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                                </td>
                                                <td>
                                                    <input type="text"  name="file_category_new" id="file_category_new" value="" />
                                                </td>
                                            </tr>
                                        <?php } ?>
                                        <?php if ( current_user_can( 'wpc_admin' ) || current_user_can( 'administrator' ) || current_user_can( 'wpc_add_file_tags' ) ) { ?>
                                            <tr>
                                                <td>
                                                    <label for="file_tags"><?php _e( 'Tags', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                                </td>
                                                <td>
                                                    <textarea id="file_tags" name="file_tags" rows="1"></textarea>
                                                    <span class="description"><?php _e( 'Note: Press Enter for add tag.', WPC_CLIENT_TEXT_DOMAIN ) ?></span>
                                                </td>
                                            </tr>
                                        <?php } ?>
                                        <tr>
                                            <td>
                                                <label><?php echo $this->custom_titles['client']['p'] ?>:</label>
                                            </td>
                                            <td>
                                                <?php
 $link_array = array( 'title' => sprintf( __( 'Assign %s to file', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'] ), 'text' => sprintf( __( 'Assign To %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'] ), 'data-input' => 'new_file_wpc_clients_1' ); $input_array = array( 'name' => 'wpc_clients', 'id' => 'new_file_wpc_clients_1', 'value' => '' ); $additional_array = array( 'counter_value' => 0 ); $this->acc_assign_popup('client', 'wpclients_files', $link_array, $input_array, $additional_array ); ?>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label><?php echo $this->custom_titles['client']['s'] . ' ' . $this->custom_titles['circle']['p'] ?>:</label>
                                            </td>
                                            <td>
                                                <?php
 $link_array = array( 'title' => sprintf( __( 'Assign %s to file', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['s'] . ' ' . $this->custom_titles['circle']['p'] ), 'text' => sprintf( __( 'Assign To %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['s'] . ' ' . $this->custom_titles['circle']['p'] ), 'data-input' => 'new_file_wpc_circles_1', ); $input_array = array( 'name' => 'wpc_circles', 'id' => 'new_file_wpc_circles_1', 'value' => '' ); $additional_array = array( 'counter_value' => 0 ); $this->acc_assign_popup('circle', 'wpclients_files', $link_array, $input_array, $additional_array ); ?>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                            </td>
                                            <td>
                                                <label><input type="checkbox" name="new_file_notify" id="new_file_notify1" value="1" /> <?php printf( __( 'Send notification to the assigned %s and associated %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'], $this->custom_titles['staff']['p'] ) ?></label>
                                                <br>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                            </td>
                                            <td>
                                                <label><input type="checkbox" name="attach_file_user" id="attach_file_user1" value="1" /> <?php printf( __( 'Attach uploaded file(s) to the email notification sent to %s and associated %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'], $this->custom_titles['staff']['p'] ) ?></label>
                                                <span class="description"><?php _e( '(size may be limited by email providers)', WPC_CLIENT_TEXT_DOMAIN ) ?></span>
                                                <br><br>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label><?php _e( 'File(s)', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                            </td>
                                            <td>
                                                <div id="queue"></div>
                                                <input id="file_upload" name="Filedata" type="file" multiple="true">
                                                <a style="position: relative; top: 8px;" href="javascript:jQuery('#file_upload').uploadifive('upload')"><?php _e( 'Upload Files', WPC_CLIENT_TEXT_DOMAIN ) ?></a>
                                            </td>
                                        </tr>
                                    </table>


                                    <script type="text/javascript">
                                        <?php $timestamp = time();?>

                                        var wpc_flash_uploader = {
                                            cancelled: '<?php _e( " - Cancelled", WPC_CLIENT_TEXT_DOMAIN ); ?>',
                                            completed: '<?php _e( " - Completed", WPC_CLIENT_TEXT_DOMAIN ); ?>',
                                            error_1: '<?php _e( "404 Error", WPC_CLIENT_TEXT_DOMAIN ); ?>',
                                            error_2: '<?php _e( "403 Forbidden", WPC_CLIENT_TEXT_DOMAIN ); ?>',
                                            error_3: '<?php _e( "Forbidden File Type", WPC_CLIENT_TEXT_DOMAIN ); ?>',
                                            error_4: '<?php _e( "File Too Large", WPC_CLIENT_TEXT_DOMAIN ); ?>',
                                            error_5: '<?php _e( "Unknown Error", WPC_CLIENT_TEXT_DOMAIN ); ?>',
                                        }

                                        jQuery( function() {
                                            var client_ids  = '';
                                            var group_ids   = '';
                                            var files;

                                            jQuery( '#file_upload' ).uploadifive({
                                                'auto'             : false,
                                                'sizeLimit'        : '<?php echo ( isset( $wpc_file_sharing['file_size_limit'] ) && '' != $wpc_file_sharing['file_size_limit'] ) ? $wpc_file_sharing['file_size_limit'] : '' ?>',
                                                'formData'         : {},

                                                'queueID'          : 'queue',
                                                'uploadScript'     : '<?php echo get_admin_url() ?>admin-ajax.php?action=wpc_client_admin_upload_files',
                                                'onUpload' : function( file ) {

                                                    if( jQuery("#file_category_new").length > 0 && jQuery("#file_category_new").val().match( /[\/\:\*\?\"\<\>\\\|\%\$]/ ) ) {
                                                        self.location.href="admin.php?page=wpclients_content&tab=files&msg=cerr";
                                                        return false;
                                                    }

                                                    client_ids = jQuery('#new_file_wpc_clients_1').val();
                                                    group_ids = jQuery('#new_file_wpc_circles_1').val();

                                                    new_file_notify = 0;
                                                    if ( 'checked' == jQuery( '#new_file_notify1' ).attr( 'checked') ) {
                                                        new_file_notify = 1;
                                                    }

                                                    attach_file_user = 0;
                                                    if ( 'checked' == jQuery( '#attach_file_user1' ).attr( 'checked') ) {
                                                        attach_file_user = 1;
                                                    }

                                                    this.data( 'uploadifive' ).settings.formData = {
                                                        'timestamp'         : '<?php echo $timestamp ?>',
                                                        'token'             : '<?php echo md5( 'unique_salt' . $timestamp ) ?>',
                                                        'new_file_notify'   : new_file_notify,
                                                        'attach_file_user'  : attach_file_user,
                                                        'file_cat_id'       : jQuery( '#file_cat_id' ).val(),
                                                        'file_tags'         : jQuery( 'input[name="file_tags"]' ).val(),
                                                        <?php echo ( current_user_can( 'administrator' ) ) ? "'file_category_new' : jQuery( '#file_category_new' ).val()," : '' ?>
                                                        'wpc_clients'   : client_ids,
                                                        'wpc_circles'   : group_ids
                                                    };
                                                },
                                                'onUploadComplete' : function( file, data ) {
                                                    //files.push(file.name);
                                                },
                                                'onQueueComplete' : function( queueData ) {
                                                    self.location.href="admin.php?page=wpclients_content&tab=files";
                                                    return false;
                                                },
                                                'buttonText' : '<?php _e( "SELECT FILES", WPC_CLIENT_TEXT_DOMAIN ); ?>'
                                            });
                                        });
                                    </script>

                                <?php
 } elseif( isset( $wpc_file_sharing['flash_uplader_admin'] ) && 'plupload' == $wpc_file_sharing['flash_uplader_admin'] ) { $wpc_file_sharing = $this->cc_get_settings( 'file_sharing' ); $max_filesize = ( isset( $wpc_file_sharing['file_size_limit'] ) && '' != $wpc_file_sharing['file_size_limit'] ) ? $wpc_file_sharing['file_size_limit'] : '0'; ?>
                                    <!--Plupload uploader-->
                                    <h3><?php _e( 'Upload File(s)', WPC_CLIENT_TEXT_DOMAIN ) ?></h3>
                                    <input type="hidden" name="wpc_action" id="wpc_action2" value="" />
                                    <table class="">
                                        <tr>
                                            <td>
                                                <label for="file_cat_id"><?php _e( 'Category', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                            </td>
                                            <td>

                                                <select name="file_cat_id" id="file_cat_id" >
                                                    <?php if ( is_array( $categories ) && 0 < count( $categories ) ) { foreach( $categories as $key => $value ) { ?>
                                                            <option value="<?php echo $key ?>">
                                                                <?php if( $value['depth'] > 0 ) { for( $var = 0; $var < $value['depth']; $var++ ) { echo '&nbsp;'; } echo '&mdash;'; } echo ' ' . $value['category_name']; ?>
                                                            </option>
                                                        <?php } } ?>
                                                </select>
                                            </td>
                                        </tr>
                                        <?php if ( current_user_can( 'wpc_admin' ) || current_user_can( 'administrator' ) ) { ?>
                                            <tr>
                                                <td>
                                                    <label for="file_category_new"><?php _e( 'New Category', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                                </td>
                                                <td>
                                                    <input type="text"  name="file_category_new" id="file_category_new" value="" />
                                                </td>
                                            </tr>
                                        <?php } ?>
                                        <?php if ( current_user_can( 'wpc_admin' ) || current_user_can( 'administrator' ) || current_user_can( 'wpc_add_file_tags' ) ) { ?>
                                            <tr>
                                                <td>
                                                    <label for="file_tags"><?php _e( 'Tags', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                                </td>
                                                <td>
                                                    <textarea id="file_tags" name="file_tags" rows="1"></textarea>
                                                    <span class="description"><?php _e( 'Note: Press Enter for add tag.', WPC_CLIENT_TEXT_DOMAIN ) ?></span>
                                                </td>
                                            </tr>
                                        <?php } ?>
                                        <tr>
                                            <td>
                                                <label><?php echo $this->custom_titles['client']['p'] ?>:</label>
                                            </td>
                                            <td>
                                                <?php
 $link_array = array( 'title' => sprintf( __( 'Assign %s to file', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'] ), 'text' => sprintf( __( 'Assign To %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'] ), 'data-input' => 'new_file_wpc_clients_1', ); $input_array = array( 'name' => 'wpc_clients', 'id' => 'new_file_wpc_clients_1', 'value' => '' ); $additional_array = array( 'counter_value' => 0 ); $this->acc_assign_popup('client', 'wpclients_files', $link_array, $input_array, $additional_array ); ?>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label><?php echo $this->custom_titles['client']['s'] . ' ' . $this->custom_titles['circle']['p'] ?>:</label>
                                            </td>
                                            <td>
                                                <?php
 $link_array = array( 'title' => sprintf( __( 'Assign %s to file', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['s'] . ' ' . $this->custom_titles['circle']['p'] ), 'text' => sprintf( __( 'Assign To %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['s'] . ' ' . $this->custom_titles['circle']['p'] ), 'data-input' => 'new_file_wpc_circles_1', ); $input_array = array( 'name' => 'wpc_circles', 'id' => 'new_file_wpc_circles_1', 'value' => '' ); $additional_array = array( 'counter_value' => 0 ); $this->acc_assign_popup('circle', 'wpclients_files', $link_array, $input_array, $additional_array ); ?>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                            </td>
                                            <td>
                                                <label><input type="checkbox" name="new_file_notify" id="new_file_notify1" value="1" /> <?php printf( __( 'Send notification to the assigned %s and associated %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'], $this->custom_titles['staff']['p'] ) ?></label>
                                                <br>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                            </td>
                                            <td>
                                                <label><input type="checkbox" name="attach_file_user" id="attach_file_user1" value="1" /> <?php printf( __( 'Attach uploaded file(s) to the email notification sent to %s and associated %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'], $this->custom_titles['staff']['p'] ) ?></label>
                                                <span class="description"><?php _e( '(size may be limited by email providers)', WPC_CLIENT_TEXT_DOMAIN ) ?></span>
                                                <br><br>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label><?php _e( 'File(s)', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                            </td>
                                            <td>

                                                <div id="queue">
                                                    <p><?php _e( "Your browser doesn't have Flash, Silverlight or HTML5 support.", WPC_CLIENT_TEXT_DOMAIN ) ?></p>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>


                                    <script type="text/javascript">
                                        <?php $timestamp = time();?>

                                        jQuery( function() {
                                            var client_ids  = '';
                                            var group_ids   = '';
                                            var new_file_notify = 0;
                                            var attach_file_user = 0;
                                            var file_category_new = '';
                                            var file_cat_id = '';
                                            var file_tags = '';

                                            //file upload
                                            jQuery("#queue").pluploadQueue({
                                                // General settings
                                                runtimes : 'html5,browserplus,silverlight,flash,gears,html4',
                                                //runtimes : 'html5,browserplus,silverlight,flash,gears,html4',
                                                url : '<?php echo get_admin_url() ?>admin-ajax.php?action=wpc_client_admin_plupload_upload_files',

                                                chunk_size : '10mb',
                                                rename : true,
                                                dragdrop: true,
                                                max_retries : 3,
                                                filters : {
                                                    <?php if( isset( $max_filesize ) && !empty( $max_filesize ) ) { ?>
                                                        // Maximum file size
                                                        max_file_size : '<?php echo $max_filesize ?>kb'
                                                    <?php } ?>
                                                    // Specify what files to browse for
                                                   /* mime_types: [
                                                        {title : "Image files", extensions : "jpg,gif,png"},
                                                        {title : "Zip files", extensions : "zip"}
                                                    ] */
                                                },
                                                init : {
                                                    BeforeUpload: function(uploader, file) {
                                                        // Called right before the upload for a given file starts, can be used to cancel it if required
                                                        if( jQuery("#file_category_new").length > 0 && jQuery("#file_category_new").val().match( /[\/\:\*\?\"\<\>\\\|\%\$]/ ) ) {
                                                            self.location.href="admin.php?page=wpclients_content&tab=files&msg=cerr";
                                                            return false;
                                                        }

                                                        client_ids = jQuery('#new_file_wpc_clients_1').val();
                                                        group_ids = jQuery('#new_file_wpc_circles_1').val();

                                                        if ( 'checked' == jQuery( '#new_file_notify1' ).attr( 'checked') ) {
                                                            new_file_notify = 1;
                                                        }

                                                        if ( 'checked' == jQuery( '#attach_file_user1' ).attr( 'checked') ) {
                                                            attach_file_user = 1;
                                                        }

                                                        if( jQuery( '#file_category_new' ).length > 0 ) {
                                                            file_category_new = jQuery( '#file_category_new' ).val();
                                                        }

                                                        file_cat_id = jQuery( '#file_cat_id' ).val();
                                                        file_tags = jQuery( 'input[name="file_tags"]' ).val();

                                                        if( '' != file_tags && 'undefined' != file_tags && file_tags.length > 0 )
                                                            file_tags = '&file_tags=' + file_tags ;
                                                        else
                                                            file_tags = '';

                                                        //file_tags = file_tags.replace( /\"/g, "'" );

                                                        uploader.settings.url = '<?php echo get_admin_url() ?>admin-ajax.php?action=wpc_client_admin_plupload_upload_files&file_category_new=' + file_category_new + '&file_cat_id=' + file_cat_id + file_tags + '&wpc_clients=' + encodeURIComponent( client_ids ) + '&wpc_circles=' + encodeURIComponent( group_ids ) + '&new_file_notify=' + new_file_notify + '&attach_file_user=' + attach_file_user;
                                                    },
                                                    UploadComplete: function(up, files) {
                                                        // Called when all files are either uploaded or failed
                                                        self.location.href="admin.php?page=wpclients_content&tab=files";
                                                        return false;
                                                    }
                                                },
                                                // Flash settings
                                                flash_swf_url : '<?php echo $this->plugin_url ?>js/plupload/Moxie.swf',

                                                // Silverlight settings
                                                silverlight_xap_url : '<?php echo $this->plugin_url ?>js/plupload/Moxie.xap'
                                            });

                                            plupload.addI18n({
                                                "Stop Upload":"<?php _e( 'Stop Upload', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Upload URL might be wrong or doesn't exist.":"<?php _e( 'Upload URL might be wrong or doesn\'t exist.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "tb":"<?php _e( 'tb', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Size":"<?php _e( 'Size', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Close":"<?php _e( 'Close', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Init error.":"<?php _e( 'Init error.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Add files to the upload queue and click the start button.":"<?php _e( 'Add files to the upload queue and click the start button.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Filename":"<?php _e( 'Filename', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Image format either wrong or not supported.":"<?php _e( 'Image format either wrong or not supported.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Status":"<?php _e( 'Status', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "HTTP Error.":"<?php _e( 'HTTP Error.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Start Upload":"<?php _e( 'Start Upload', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "mb":"<?php _e( 'mb', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "kb":"<?php _e( 'kb', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Duplicate file error.":"<?php _e( 'Duplicate file error.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "File size error.":"<?php _e( 'File size error.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "N/A":"<?php _e( 'N/A', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "gb":"<?php _e( 'gb', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Error: Invalid file extension:":"<?php _e( 'Error: Invalid file extension:', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Select files":"<?php _e( 'Select files', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "%s already present in the queue.":"<?php _e( '%s already present in the queue.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "File: %s":"<?php _e( 'File: %s', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "b":"<?php _e( 'b', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Uploaded %d/%d files":"<?php _e( 'Uploaded %d/%d files', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Upload element accepts only %d file(s) at a time. Extra files were stripped.":"<?php _e( 'Upload element accepts only %d file(s) at a time. Extra files were stripped.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "%d files queued":"<?php _e( '%d files queued', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "File: %s, size: %d, max file size: %d":"<?php _e( 'File: %s, size: %d, max file size: %d', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Drag files here.":"<?php _e( 'Drag files here.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Runtime ran out of available memory.":"<?php _e( 'Runtime ran out of available memory.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "File count error.":"<?php _e( 'File count error.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "File extension error.":"<?php _e( 'File extension error.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Error: File too large:":"<?php _e( 'Error: File too large:', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                                                "Add Files":"<?php _e( 'Add Files', WPC_CLIENT_TEXT_DOMAIN ) ?>"
                                            });

                                        });
                                    </script>

                                <?php } else { ?>
                                    <!--Regular uploader-->
                                    <h3><?php _e( 'Upload File', WPC_CLIENT_TEXT_DOMAIN ) ?></h3>
                                    <input type="hidden" name="wpc_action" value="upload_file" />
                                    <table class="">
                                        <tr>
                                            <td>
                                                <label for="file"><?php _e( 'File', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                            </td>
                                            <td>
                                                <input type="file" name="file" id="file" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label for="file_title"><?php _e( 'File Title', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                            </td>
                                            <td>
                                                <input type="text" name="file_title" id="file_title" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label for="file_description"><?php _e( 'File Description', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                            </td>
                                            <td>
                                                <textarea cols="50" rows="2" name="file_description" id="file_description"></textarea>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label for="file_cat_id"><?php _e( 'Category', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                            </td>
                                            <td>

                                                <select name="file_cat_id" id="file_cat_id">
                                                    <?php if ( is_array( $categories ) && 0 < count( $categories ) ) { foreach( $categories as $key => $value ) {?>
                                                            <option value="<?php echo $key ?>">
                                                                <?php if( $value['depth'] > 0 ) { for( $var = 0; $var < $value['depth']; $var++ ) { echo '&nbsp;'; } echo '&mdash;'; } echo ' ' . $value['category_name']; ?>
                                                            </option>
                                                        <?php } } ?>
                                                </select>
                                            </td>
                                        </tr>
                                        <?php if ( current_user_can( 'wpc_admin' ) || current_user_can( 'administrator' ) ): ?>
                                        <tr>
                                            <td>
                                                <label for="file_category_new"><?php _e( 'New Category', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                            </td>
                                            <td>
                                                <input type="text" name="file_category_new" id="file_category_new" />
                                            </td>
                                        </tr>
                                        <?php endif; ?>

                                        <?php if ( current_user_can( 'wpc_admin' ) || current_user_can( 'administrator' ) || current_user_can( 'wpc_add_file_tags' ) ) { ?>
                                            <tr>
                                                <td>
                                                    <label for="file_tags"><?php _e( 'Tags', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                                </td>
                                                <td>
                                                    <textarea id="file_tags" name="file_tags" rows="1"></textarea>
                                                    <span class="description"><?php _e( 'Note: Press Enter for add tag.', WPC_CLIENT_TEXT_DOMAIN ) ?></span>
                                                </td>
                                            </tr>
                                        <?php } ?>

                                        <tr>
                                            <td>
                                                <label><?php echo $this->custom_titles['client']['p'] ?>:</label>
                                            </td>
                                            <td>
                                                <?php
 $link_array = array( 'title' => sprintf( __( 'Assign %s to file', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'] ), 'text' => sprintf( __( 'Assign To %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'] ), 'data-input' => 'new_file_wpc_clients_1' ); $input_array = array( 'name' => 'wpc_clients', 'id' => 'new_file_wpc_clients_1', 'value' => '' ); $additional_array = array( 'counter_value' => 0 ); $this->acc_assign_popup('client', 'wpclients_files', $link_array, $input_array, $additional_array ); ?>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td>
                                                <label><?php echo $this->custom_titles['client']['s'] . ' ' . $this->custom_titles['circle']['p'] ?>:</label>
                                            </td>
                                            <td>
                                                <?php
 $link_array = array( 'title' => sprintf( __( 'Assign %s to file', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['s'] . ' ' . $this->custom_titles['circle']['p'] ), 'text' => sprintf( __( 'Assign To %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['s'] . ' ' . $this->custom_titles['circle']['p'] ), 'data-input' => 'new_file_wpc_circles_1' ); $input_array = array( 'name' => 'wpc_circles', 'id' => 'new_file_wpc_circles_1', 'value' => '' ); $additional_array = array( 'counter_value' => 0 ); $this->acc_assign_popup('circle', 'wpclients_files', $link_array, $input_array, $additional_array ); ?>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td>
                                            </td>
                                            <td>
                                                <label><input type="checkbox" name="new_file_notify" id="new_file_notify1" value="1" /> <?php printf( __( 'Send notification to the assigned %s and associated %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'], $this->custom_titles['staff']['p'] ) ?></label>
                                                <br>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td>
                                            </td>
                                            <td>
                                                <label><input type="checkbox" name="attach_file_user" id="attach_file_user2" value="1" /> <?php printf( __( 'Attach uploaded file(s) to the email notification sent to %s and associated %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'], $this->custom_titles['staff']['p'] ) ?></label>
                                                <span class="description"><?php _e( '(size may be limited by email providers)', WPC_CLIENT_TEXT_DOMAIN ) ?></span>
                                                <br><br>
                                            </td>
                                        </tr>


                                    </table>
                                    <input type="button" class='button-primary' id="upload_1" value="<?php _e( 'Upload File', WPC_CLIENT_TEXT_DOMAIN ) ?>" />
                            <?php
 } } ?>

                            </td>
                        </tr>
                    </table>
                </div>

                <div id="upload_file_panel_2" class="upload_file_panel">
                    <input type="hidden" name="wpc_action" value="upload_file" />
                    <table class="">
                        <tr>
                            <td>
                                <h3><?php _e( 'Add an external file | From onsite or offsite server location', WPC_CLIENT_TEXT_DOMAIN ) ?></h3>
                                <table class="">
                                    <tr>
                                        <td>
                                            <label for="file_name"><?php _e( 'File Name', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                        </td>
                                        <td>
                                            <input type="text" name="file_name" id="file_name" />
                                            <span class="description"><?php _e( 'ex. file.zip', WPC_CLIENT_TEXT_DOMAIN ) ?></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="file_url"><?php _e( 'File URL', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                        </td>
                                        <td>
                                            <input type="text" name="file_url" id="file_url" />
                                            <span class="description"><?php _e( 'ex. http://www.site.com/file.zip', WPC_CLIENT_TEXT_DOMAIN ) ?></span>
                                        </td>
                                    </tr>
                                    <tr class="file_protect_url_content">
                                        <td>
                                        </td>
                                        <td>
                                            <input type="checkbox" name="file_protect_url" id="file_protect_url" value="1" />
                                            <b><label for="file_protect_url"><?php _e( 'Protect URL', WPC_CLIENT_TEXT_DOMAIN ) ?></label></b>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <span class="description"><?php _e( 'May not work with some URLs', WPC_CLIENT_TEXT_DOMAIN ) ?></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="file_title2"><?php _e( 'File Title', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                        </td>
                                        <td>
                                            <input type="text" name="file_title2" id="file_title2" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="file_description2"><?php _e( 'File Description', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                        </td>
                                        <td>
                                            <textarea cols="50" rows="2" name="file_description2" id="file_description2"></textarea>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="file_cat_id_2"><?php _e( 'Category', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                        </td>
                                        <td>
                                            <select name="file_cat_id" id="file_cat_id_2">
                                                <?php if ( is_array( $categories ) && 0 < count( $categories ) ) { foreach( $categories as $key => $value ) { ?>
                                                        <option value="<?php echo $key ?>">
                                                            <?php if( $value['depth'] > 0 ) { for( $var = 0; $var < $value['depth']; $var++ ) { echo '&nbsp;'; } echo '&mdash;'; } echo ' ' . $value['category_name']; ?>
                                                        </option>
                                                    <?php } } ?>
                                            </select>
                                        </td>
                                    </tr>
                                    <?php if ( current_user_can( 'wpc_admin' ) || current_user_can( 'administrator' ) ): ?>
                                    <tr>
                                        <td>
                                            <label for="file_category_new_2"><?php _e( 'New Category', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                        </td>
                                        <td>
                                            <input type="text" name="file_category_new" id="file_category_new_2" />
                                        </td>
                                    </tr>
                                    <?php endif; ?>

                                    <tr>
                                        <td>
                                            <label><?php echo $this->custom_titles['client']['p'] ?>:</label>
                                        </td>
                                        <td>
                                            <?php
 $link_array = array( 'title' => sprintf( __( 'Assign %s to file', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'] ), 'text' => sprintf( __( 'Assign To %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'] ), 'data-input' => 'new_file_wpc_clients_2' ); $input_array = array( 'name' => 'wpc_clients', 'id' => 'new_file_wpc_clients_2', 'value' => '' ); $additional_array = array( 'counter_value' => 0, 'input_ref' => 'wpc_clients' ); $this->acc_assign_popup('client', 'wpclients_files', $link_array, $input_array, $additional_array ); ?>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>
                                            <label><?php echo $this->custom_titles['client']['s'] . ' ' . $this->custom_titles['circle']['p'] ?>:</label>
                                        </td>
                                        <td>
                                            <?php
 $link_array = array( 'title' => sprintf( __( 'Assign %s to file', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['s'] . ' ' . $this->custom_titles['circle']['p'] ), 'text' => sprintf( __( 'Assign To %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['s'] . ' ' . $this->custom_titles['circle']['p'] ), 'data-input' => 'new_file_wpc_circles_2', ); $input_array = array( 'name' => 'wpc_circles', 'id' => 'new_file_wpc_circles_2', 'value' => '' ); $additional_array = array( 'counter_value' => 0, 'input_ref' => 'wpc_circles' ); $this->acc_assign_popup('circle', 'wpclients_files', $link_array, $input_array, $additional_array ); ?>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>
                                        </td>
                                        <td>
                                            <label><input type="checkbox" name="new_file_notify" id="new_file_notify2" value="1" /> <?php printf( __( 'Send notification to the assigned %s and associated %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'], $this->custom_titles['staff']['p'] ) ?></label>
                                            <br><br>
                                        </td>
                                    </tr>

                                </table>
                                <input type="button" class='button-primary' id="upload_2" value="<?php _e( 'Add External File', WPC_CLIENT_TEXT_DOMAIN ) ?>" />
                            </td>
                        </tr>
                    </table>
                </div>

                <div id="upload_file_panel_3" class="upload_file_panel">
                    <input type="hidden" name="wpc_action" value="upload_file" />
                    <table class="">
                        <tr>
                            <td>
                                <h3><?php printf( __( 'Assign File From FTP (%s protects the files in this directory)', WPC_CLIENT_TEXT_DOMAIN ), $this->plugin['title'] ) ?></h3>
                                <span class="description"><?php printf( __( 'To assign files, you should upload it by FTP into folder %s', WPC_CLIENT_TEXT_DOMAIN ), $target_path ) ?></span>
                                <table class="">
                                    <tr>
                                        <td>
                                            <label for="ftp_selected_file"><?php _e( 'File', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                        </td>
                                        <td>
                                            <?php if ( 0 < count( $ftp_files ) ) { ?>
                                            <select name="ftp_selected_files[]" id="ftp_selected_file" data-placeholder="<?php _e( 'Select Files', WPC_CLIENT_TEXT_DOMAIN ) ?>" multiple style="width: 300px;">
                                                <option value=""></option>
                                                <?php foreach ( $ftp_files as $ftp_file ) { echo '<option value="' . $ftp_file['name'] .'">'. $ftp_file['name'] .' (' . $ftp_file['size'] . ')</option>'; } ?>
                                            </select>
                                            <?php } else { ?>
                                                <select name="ftp_selected_file" id="ftp_selected_file" data-placeholder="<?php _e( '- No Files For Select -', WPC_CLIENT_TEXT_DOMAIN ) ?>" style="width: 300px;"></select>
                                            <?php } ?>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="file_title3"><?php _e( 'File Title', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                        </td>
                                        <td>
                                            <input type="text" name="file_title" id="file_title3" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="file_description3"><?php _e( 'File Description', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                        </td>
                                        <td>
                                            <textarea cols="50" rows="2" name="file_description" id="file_description3"></textarea>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="file_cat_id_3"><?php _e( 'Category', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                        </td>
                                        <td>
                                            <select name="file_cat_id" id="file_cat_id_3">
                                                <?php if ( is_array( $categories ) && 0 < count( $categories ) ) { foreach( $categories as $key => $value ) { ?>
                                                        <option value="<?php echo $key ?>">
                                                            <?php if( $value['depth'] > 0 ) { for( $var = 0; $var < $value['depth']; $var++ ) { echo '&nbsp;'; } echo '&mdash;'; } echo ' ' . $value['category_name']; ?>
                                                        </option>
                                                    <?php } } ?>
                                            </select>
                                        </td>
                                    </tr>
                                    <?php if ( current_user_can( 'wpc_admin' ) || current_user_can( 'administrator' ) ): ?>
                                    <tr>
                                        <td>
                                            <label for="file_category_new_2"><?php _e( 'New Category', WPC_CLIENT_TEXT_DOMAIN ) ?>:</label>
                                        </td>
                                        <td>
                                            <input type="text" name="file_category_new" id="file_category_new_2" />
                                        </td>
                                    </tr>
                                    <?php endif; ?>

                                    <tr>
                                        <td>
                                            <label><?php echo $this->custom_titles['client']['p'] ?>:</label>
                                        </td>
                                        <td>
                                            <?php
 $link_array = array( 'title' => sprintf( __( 'Assign %s to file', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'] ), 'text' => sprintf( __( 'Assign To %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'] ), 'data-input' => 'new_file_wpc_clients_3' ); $input_array = array( 'name' => 'wpc_clients', 'id' => 'new_file_wpc_clients_3', 'value' => '' ); $additional_array = array( 'counter_value' => 0, 'input_ref' => 'wpc_clients' ); $this->acc_assign_popup('client', 'wpclients_files', $link_array, $input_array, $additional_array ); ?>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>
                                            <label><?php echo $this->custom_titles['client']['s'] . ' ' . $this->custom_titles['circle']['p'] ?>:</label>
                                        </td>
                                        <td>
                                            <?php
 $link_array = array( 'title' => sprintf( __( 'Assign %s to file', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['s'] . ' ' . $this->custom_titles['circle']['p'] ), 'text' => sprintf( __( 'Assign To %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['s'] . ' ' . $this->custom_titles['circle']['p'] ), 'data-input' => 'new_file_wpc_circles_3' ); $input_array = array( 'name' => 'wpc_circles', 'id' => 'new_file_wpc_circles_3', 'value' => '' ); $additional_array = array( 'counter_value' => 0, 'input_ref' => 'wpc_circles' ); $this->acc_assign_popup('circle', 'wpclients_files', $link_array, $input_array, $additional_array ); ?>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>
                                        </td>
                                        <td>
                                            <label><input type="checkbox" name="new_file_notify" id="new_file_notify2" value="1" /> <?php printf( __( 'Send notification to the assigned %s and associated %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'], $this->custom_titles['staff']['p'] ) ?></label>
                                            <br>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>
                                        </td>
                                        <td>
                                            <label><input type="checkbox" name="attach_file_user" id="attach_file_user3" value="1" /> <?php printf( __( 'Attach uploaded file(s) to the email notification sent to %s and associated %s', WPC_CLIENT_TEXT_DOMAIN ), $this->custom_titles['client']['p'], $this->custom_titles['staff']['p'] ) ?></label>
                                            <span class="description"><?php _e( '(size may be limited by email providers)', WPC_CLIENT_TEXT_DOMAIN ) ?></span>
                                            <br><br>
                                        </td>
                                    </tr>

                                </table>
                                <input type="button" class='button-primary' id="upload_3" value="<?php _e( 'Assign File', WPC_CLIENT_TEXT_DOMAIN ) ?>" />
                            </td>
                        </tr>
                    </table>
                </div>

                <?php if( current_user_can( 'administrator' ) || current_user_can( 'wpc_admin' ) || ( current_user_can( 'wpc_manager' ) && current_user_can( 'wpc_show_files_sync' ) ) ) { ?>
                    <div id="upload_file_panel_4" class="upload_file_panel">
                        <input type="hidden" name="wpc_action" value="synchronize_with_ftp" />
                        <table class="">
                            <tr>
                                <td>
                                    <h3><?php printf( __( 'Synchronize files with FTP (%s protects the files in this directory %s)', WPC_CLIENT_TEXT_DOMAIN ), $this->plugin['title'], $target_path ) ?></h3>
                                    <span class="description" style="float: left;width: 100%;margin-bottom: 15px;"><?php _e( 'Click "Synchronize now" to synchronize database Files and File Categories with files and folders on your server', WPC_CLIENT_TEXT_DOMAIN ) ?></span>
                                    <input type="button" class="button-primary" id="upload_4" value="<?php _e( 'Synchronize now', WPC_CLIENT_TEXT_DOMAIN ) ?>" />
                                </td>
                            </tr>
                        </table>
                    </div>
                <?php } ?>
            </form>


            <ul class="subsubsub">
                <li class="all"><a class="<?php echo ( '' == $filter ) ? 'current' : '' ?>" href="admin.php?page=wpclients_content&tab=files"  ><?php _e( 'All', WPC_CLIENT_TEXT_DOMAIN ) ?> <span class="count">(<?php echo $count_all_files ?>)</span></a> |</li>

                <?php if( current_user_can( 'wpc_manager' ) && !current_user_can( 'administrator' ) ) { ?>
                    <li class="image"><a class="<?php echo ( '_wpc_your' == $filter ) ? 'current' : '' ?>" href="admin.php?page=wpclients_content&tab=files&filter=_wpc_your"><?php _e( 'Your files', WPC_CLIENT_TEXT_DOMAIN ) ?> <span class="count">(<?php echo ( 0 < $count_your ) ? $count_your : '0' ?>)</span></a></li>
                <?php } else { ?>
                    <li class="image"><a class="<?php echo ( '_wpc_admin' == $filter ) ? 'current' : '' ?>" href="admin.php?page=wpclients_content&tab=files&filter=_wpc_admin"><?php _e( 'Admin files', WPC_CLIENT_TEXT_DOMAIN ) ?> <span class="count">(<?php echo ( 0 < $count_admin_files ) ? $count_admin_files : '0' ?>)</span></a> |</li>
                    <li class="image"><a class="<?php echo ( '_wpc_for_admin' == $filter ) ? 'current' : '' ?>" href="admin.php?page=wpclients_content&tab=files&filter=_wpc_for_admin"><?php _e( 'Files for Admin', WPC_CLIENT_TEXT_DOMAIN ) ?> <span class="count">(<?php echo ( 0 < $count_for_admin ) ? $count_for_admin : '0' ?>)</span></a> |</li>
                    <li class="image"><a class="<?php echo ( '_wpc_your' == $filter ) ? 'current' : '' ?>" href="admin.php?page=wpclients_content&tab=files&filter=_wpc_your"><?php _e( 'Your files', WPC_CLIENT_TEXT_DOMAIN ) ?> <span class="count">(<?php echo ( 0 < $count_your ) ? $count_your : '0' ?>)</span></a></li>
                <?php } ?>

            </ul>

            <!-- empty form for clear order feilds before submit -->
            <form action="" method="get" name="formformfromfrom123" id="formformfromfrom123">
            </form>

            <form action="" method="get" name="wpc_file_form" id="wpc_file_form">
                <input type="hidden" name="page" value="wpclients_content" />
                <input type="hidden" name="tab" value="files" />
                <?php $ListTable->search_box( __( 'Search Files' , WPC_CLIENT_TEXT_DOMAIN ), 'search-submit' ); ?>
                <?php $ListTable->display(); ?>
            </form>


        </div>


        <div class="wpc_edit_file_box" id="edit_file" style="display: none;">
            <h3><?php _e( 'Edit File:', WPC_CLIENT_TEXT_DOMAIN ) ?> <span id="edit_file_name"></span></h3>
            <form method="post" name="wpc_edit_file" id="wpc_edit_file">
                <input type="hidden" name="edit_file_id" id="edit_file_id" value="" />
                <table>
                    <tr>
                        <td>
                            <label>
                                <?php _e( 'File Title:', WPC_CLIENT_TEXT_DOMAIN ) ?>
                                <br />
                                <input type="text" name="edit_file_title" size="70" id="edit_file_title"  value="" />

                            </label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <?php _e( 'File Tags:', WPC_CLIENT_TEXT_DOMAIN ) ?>
                            <br />
                            <span id="span_for_file_tags"></span>
                            <span class="description"><?php _e( 'Please press Enter when you wrote title of tag.', WPC_CLIENT_TEXT_DOMAIN ) ?></span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>
                                <?php _e( 'File Description:', WPC_CLIENT_TEXT_DOMAIN ) ?>
                                <br />
                                <textarea name="edit_file_description" cols="67" rows="5" id="edit_file_description" ></textarea>
                            </label>
                        </td>
                    </tr>
                </table>
                <div id="edit_external_block">
                    <input type="hidden" name="edit_external_file" id="edit_external_file" value="" />
                    <table>
                        <tr>
                            <td>
                                <label>
                                    <?php _e( 'File URL:', WPC_CLIENT_TEXT_DOMAIN ) ?>
                                    <br />
                                    <input type="text" name="edit_file_url" size="70" id="edit_file_url"  value="" />
                                </label>
                            </td>
                        </tr>
                        <tr class="edit_file_protect_url_content">
                            <td>
                                <label>
                                    <input type="checkbox" name="edit_file_protect_url" id="edit_file_protect_url" value="1">
                                    <b><label for="edit_file_protect_url"><?php _e( 'Protect URL', WPC_CLIENT_TEXT_DOMAIN ) ?></label></b>
                                </label>
                            </td>
                        </tr>
                    </table>
                </div>
                <div style="clear: both; text-align: center;">
                    <input type="button" class='button-primary' id="update_file" name="update_file" value="<?php _e( 'Update File Data', WPC_CLIENT_TEXT_DOMAIN ) ?>" />
                    <input type="button" class='button' id="close_edit_file" value="<?php _e( 'Close', WPC_CLIENT_TEXT_DOMAIN ) ?>" />
                </div>
            </form>
        </div>

    <script type="text/javascript">
        var site_url = '<?php echo site_url();?>';
        var request_uri = "<?php echo $_SERVER['REQUEST_URI'];?>";

        //save order
        function update_order( file_id ) {
            file_order = jQuery( '#file_order_' + file_id ).val();
            jQuery( '#order_' + file_id ).css( 'display', 'inline-block' );
            jQuery.ajax({
                type: 'POST',
                dataType: 'json',
                url: '<?php echo get_admin_url() ?>admin-ajax.php',
                data: 'action=wpc_files_update_order&file_id='+file_id+'&file_order=' + file_order,
                success: function( json_data ){
                            jQuery( '#order_' + file_id ).css( 'display', 'none' );
                            jQuery( '#file_order_' + file_id ).val( json_data.my_value );
                        }
             });
        }

        jQuery( document ).ready( function() {

            jQuery( '.file_protect_url_content' ).hide();

            jQuery( '#file_url' ).change( function() {
                var file_url = jQuery(this).val();

                if( file_url.indexOf( 'http://' ) === 0 || file_url.indexOf( 'https://' ) === 0 ) {
                    jQuery( '.file_protect_url_content' ).show();
                } else {
                    jQuery( '.file_protect_url_content' ).hide();
                    jQuery( '#file_protect_url' ).attr( 'checked', false );
                }
            });

            jQuery( '#edit_file_url' ).change( function() {
                var file_url = jQuery(this).val();

                if( file_url.indexOf( 'http://' ) === 0 || file_url.indexOf( 'https://' ) === 0 ) {
                    jQuery( '.edit_file_protect_url_content' ).show();
                } else {
                    jQuery( '.edit_file_protect_url_content' ).hide();
                    jQuery( '#edit_file_protect_url' ).attr( 'checked', false );
                }
            });

            //remove extra fields before submit form
            jQuery( '#wpc_file_form' ).submit( function() {
                jQuery( '.change_clients' ).remove();
                jQuery( '.change_circles' ).remove();
                return true;
            });

            jQuery( '#ftp_selected_file' ).chosen({
                no_results_text: '<?php _e( 'No results matched', WPC_CLIENT_TEXT_DOMAIN ) ?>',
                allow_single_deselect: true,
            });

            //Upload file form 2
            jQuery( '#upload_1, #upload_2, #upload_3, #upload_4' ).click( function() {
                var current_id = jQuery( this ).attr( 'id' );

                if ( 'upload_1' == current_id ) {
                    if ( '' == jQuery( '#file' ).val() ) {
                        alert("<?php _e( 'Please select file to upload.', WPC_CLIENT_TEXT_DOMAIN ) ?>")
                        return false;
                    }
                } else if ( 'upload_2' == current_id ) {
                    if ( '' == jQuery( '#file_url' ).val() ) {
                        alert("<?php _e( 'Please write file url.', WPC_CLIENT_TEXT_DOMAIN ) ?>")
                        return false;
                    }
                } else if ( 'upload_3' == current_id ) {
                    if ( '' == jQuery( '#ftp_selected_file' ).val() ) {
                        alert("<?php _e( 'Please select file to assign.', WPC_CLIENT_TEXT_DOMAIN ) ?>")
                        return false;
                    }
                }

                jQuery( '.upload_file_panel:hidden' ).remove();
                jQuery( '#upload_file' ).submit();

            });


            //Show/hide upload form
            jQuery( '#slide_upload_panel_1, #slide_upload_panel_2, #slide_upload_panel_3, #slide_upload_panel_4' ).click( function() {
                var current_slider = this;
                var current_uploader = '#upload_file_panel_' + jQuery( this ).attr( 'rel' );

                if ( jQuery( current_uploader ).is( ':visible' ) ) {
                    jQuery( current_slider ).toggleClass( 'active' );
                    jQuery( current_uploader ).slideToggle( 'fast' );
                } else if ( jQuery( '#upload_file_panel_1' ).is( ':visible' ) ) {
                    jQuery( current_slider ).toggleClass( 'active' );
                    jQuery( '#upload_file_panel_1' ).slideToggle( 'fast', function() {
                        jQuery( '#slide_upload_panel_1' ).removeClass( 'active' );
                        jQuery( current_uploader ).slideToggle( 'slow' );
                    } );
                } else if ( jQuery( '#upload_file_panel_2' ).is( ':visible' ) ) {
                    jQuery( current_slider ).toggleClass( 'active' );
                    jQuery( '#upload_file_panel_2' ).slideToggle( 'fast', function() {
                        jQuery( '#slide_upload_panel_2' ).removeClass( 'active' );
                        jQuery( current_uploader ).slideToggle( 'slow' );
                    } );
                } else if ( jQuery( '#upload_file_panel_3' ).is( ':visible' ) ) {
                    jQuery( current_slider ).toggleClass( 'active' );
                    jQuery( '#upload_file_panel_3' ).slideToggle( 'fast', function() {
                        jQuery( '#slide_upload_panel_3' ).removeClass( 'active' );
                        jQuery( current_uploader ).slideToggle( 'slow' );
                    } );
                } else if ( jQuery( '#upload_file_panel_4' ).is( ':visible' ) ) {
                    jQuery( current_slider ).toggleClass( 'active' );
                    jQuery( '#upload_file_panel_4' ).slideToggle( 'fast', function() {
                        jQuery( '#slide_upload_panel_4' ).removeClass( 'active' );
                        jQuery( current_uploader ).slideToggle( 'slow' );
                    } );
                } else {
                    jQuery( current_uploader ).slideToggle( 'slow' );
                    jQuery( current_slider ).toggleClass( 'active' );
                }
            });


            //reassign file from Bulk Actions
            jQuery( '#doaction' ).click( function() {
                if ( 'reassign' == jQuery( 'select[name="action"]' ).val() ) {
                    jQuery( '#new_cat_id2' ).remove();
                    jQuery( 'select[name="action2"]' ).attr( 'name', 'aaaaaaaaaa' );
                }
                return true;
            });


            //reassign file from Bulk Actions
            jQuery( '#doaction2' ).click( function() {
                if ( 'reassign' == jQuery( 'select[name="action2"]' ).val() ) {
                    jQuery( '#new_cat_id' ).remove();
                    jQuery( 'select[name="action"]' ).attr( 'name', 'aaaaaaaaaa' );
                }
                return true;
            });

            //show reassign cats
            jQuery( 'select[name="action"]' ).change( function() {
                if ( 'reassign' == jQuery( this ).val() ) {
                    jQuery( '#new_cat_id' ).show();
                } else {
                    jQuery( '#new_cat_id' ).hide();
                }
                return false;
            });

            //show reassign cats
            jQuery( 'select[name="action2"]' ).change( function() {
                if ( 'reassign' == jQuery( this ).val() ) {
                    jQuery( '#new_cat_id2' ).show();
                } else {
                    jQuery( '#new_cat_id2' ).hide();
                }
                return false;
            });

            //change filter
            jQuery( '#change_filter' ).change( function() {
                if ( '-1' != jQuery( '#change_filter' ).val() ) {
                    var filter = jQuery( '#change_filter' ).val();
                    jQuery( '#select_filter' ).css( 'display', 'none' );
                    jQuery( '#select_filter' ).html( '' );
                    jQuery( '#load_select_filter' ).addClass( 'wpc_ajax_loading' );
                    jQuery.ajax({
                        type: 'POST',
                        url: '<?php echo get_admin_url() ?>admin-ajax.php',
                        data: 'action=wpc_get_options_filter_for_files&filter=' + filter,
                        dataType: 'html',
                        success: function( data ){
                            jQuery( '#select_filter' ).html( data );
                            jQuery( '#load_select_filter' ).removeClass( 'wpc_ajax_loading' );
                            jQuery( '#select_filter' ).css( 'display', 'block' );
                        }
                    });
                }
                else jQuery( '#select_filter' ).css( 'display', 'none' );
                return false;
            });

            //filter
            jQuery( '#filtered' ).click( function() {
                if ( '-1' != jQuery( '#change_filter' ).val() && '-1' != jQuery( '#select_filter' ).val() ) {
                    var req_uri = "<?php echo preg_replace( '/&filter_category=[0-9]+|&filter_author=[0-9]+|&filter_tag=[0-9]+|&filter_client=[0-9]+|&filter_circle=[0-9]+|&change_filter=[a-z]+|&msg=[^&]+/', '', $_SERVER['REQUEST_URI'] ); ?>";
                    //if ( in_array() )
                    switch( jQuery( '#change_filter' ).val() ) {
                        case 'author':
                            window.location = req_uri + '&filter_author=' + jQuery( '#select_filter' ).val() + '&change_filter=author';
                            break;
                        case 'tag':
                            window.location = req_uri + '&filter_tag=' + jQuery( '#select_filter' ).val() + '&change_filter=tag';
                            break;
                        case 'client':
                            window.location = req_uri + '&filter_client=' + jQuery( '#select_filter' ).val() + '&change_filter=client';
                            break;
                        case 'circle':
                            window.location = req_uri + '&filter_circle=' + jQuery( '#select_filter' ).val() + '&change_filter=circle';
                            break;
                        case 'category':
                            window.location = req_uri + '&filter_category=' + jQuery( '#select_filter' ).val() + '&change_filter=category';
                            break;
                    }
                }
                return false;
            });


            jQuery( '#cancel_filter' ).click( function() {
                var req_uri = "<?php echo preg_replace( '/&filter_category=[0-9]+|&filter_author=[0-9]+|&filter_tag=[0-9]+|&filter_client=[0-9]+|&filter_circle=[0-9]+|&change_filter=[a-z]+|&msg=[^&]+/', '', $_SERVER['REQUEST_URI'] ); ?>";
                window.location = req_uri;
                return false;
            });

            function stripslashes( str ) {
                str = str.replace(/\\'/g, '\'');
                str = str.replace(/\\"/g, '"');
                str = str.replace(/\\0/g, '\0');
                str = str.replace(/\\\\/g, '\\');
                return str;
            }

            //show edit file form
            jQuery( '.various' ).click( function() {
                var id = jQuery(this).attr('rel');

                jQuery( '#edit_file_name' ).html( '' );
                jQuery( '#edit_file_id' ).val( '' );
                jQuery( '#edit_file_title' ).val( '' );
                jQuery( '#edit_file_description' ).val( '' );
                jQuery( '#edit_file_url' ).val( '' );
                jQuery( '#edit_file_protect_url' ).attr( 'checked', false );


                if( jQuery( '#file_name_block_' + id ).hasClass('wpc_external_file') ) {
                    jQuery( '#edit_external_block' ).show();
                    jQuery( '#edit_external_file' ).val('1');
                } else {
                    jQuery( '#edit_external_block' ).hide();
                    jQuery( '#edit_external_file' ).val('');
                }

                var file_tags = jQuery(this).data('file_tags');

                //show content for edit file
                jQuery( '.various' ).fancybox({
                    fitToView   : false,
                    autoSize    : true,
                    closeClick  : false,
                    openEffect  : 'none',
                    closeEffect : 'none',
                    afterShow   : function() {
                        jQuery('#span_for_file_tags').html('<textarea id="edit_file_tags" name="edit_file_tags" rows="1" style="width: 500px;"></textarea>');
                        jQuery('#edit_file_tags').textext({
                            tagsItems : file_tags,
                            plugins : 'tags focus autocomplete ajax arrow prompt',
                            prompt : 'Add tag...',
                            ajax : {
                                url : '<?php echo get_admin_url() ?>admin-ajax.php?action=wpc_get_all_file_tags',
                                dataType : 'json',
                                cacheResults : true
                            }
                        });

                    },

                    beforeClose  : function() {
                        jQuery('#span_for_file_tags').html('');


                    }

                });

                var file_name = jQuery( '#file_name_block_' + id + ' span.description' ).html();
                file_name = file_name.replace( /(^\s+)|(\s+$)/g, "" );

                var file_title = jQuery( '#file_name_block_' + id + ' a' ).data( 'title' );
                //file_title = file_title.replace( /(^\s+)|(\s+$)/g, "" );
                file_title = stripslashes( jQuery.base64Decode( file_title ) );

                var file_description = jQuery( '#file_name_block_' + id + ' a' ).data( 'description' );
                //file_description = file_description.replace( 'Description: ', '' );
                file_description = stripslashes( jQuery.base64Decode( file_description ) );

                jQuery( '#edit_file_name' ).html( file_name );


                jQuery( '#edit_file_id' ).val( id );
                jQuery( '#edit_file_title' ).val( file_title );
                jQuery( '#edit_file_description' ).val( file_description );

                if( jQuery( '#file_name_block_' + id ).hasClass('wpc_external_file') ) {
                    var file_url = jQuery( '#file_name_block_' + id + ' span.external_info.url' ).html();
                    file_url = file_url.replace( /(^\s+)|(\s+$)/g, "" );

                    var file_protect_url = jQuery( '#file_name_block_' + id + ' span.external_info.url_protect' ).html();;
                    file_protect_url = ( file_protect_url == '1' ) ? true : false;

                    if( file_url.indexOf( 'http://' ) === 0 || file_url.indexOf( 'https://' ) === 0 ) {
                        jQuery( '.edit_file_protect_url_content' ).show();
                        jQuery( '#edit_file_protect_url' ).attr( 'checked', file_protect_url );
                    } else {
                        jQuery( '.edit_file_protect_url_content' ).hide();
                    }

                    jQuery( '#edit_file_url' ).val( file_url );
                }

            });

            //close edit file
            jQuery( '#close_edit_file' ).click( function() {
                jQuery( '#edit_file_name' ).html( '' );
                jQuery( '#edit_file_id' ).val( '' );
                jQuery( '#edit_file_title' ).val( '' );
                jQuery( '#edit_file_description' ).html( '' );
                jQuery.fancybox.close();
            });


            // AJAX - update file data
            jQuery( '#update_file' ).click( function() {
                file_id     = jQuery( '#edit_file_id' ).val();
                title       = jQuery( '#edit_file_title' ).val();
                description = jQuery( '#edit_file_description' ).val();

                file_tags   = jQuery( 'input[name="edit_file_tags"]' ).val();
                //console.log(file_tags)

                var external = ( jQuery( '#edit_external_file' ).val() == '1' ) ? true : false;
                var additional_query = '';

                if( external ) {
                    var url         = jQuery( '#edit_file_url' ).val();
                    var protect_url = ( jQuery( '#edit_file_protect_url:checked' ).length == 1 ) ? 1 : 0;

                    additional_query = '&url=' + url + '&protect_url=' + protect_url;
                }

                jQuery( 'body' ).css( 'cursor', 'wait' );

                jQuery.ajax({
                    type: 'POST',
                    url: '<?php echo get_admin_url() ?>admin-ajax.php',
                    data: 'action=wpc_update_file_data&file_id=' + file_id + '&title=' + jQuery.base64Encode( title ) + '&file_tags=' + file_tags +'&description=' + jQuery.base64Encode( description ) + additional_query,
                    dataType: "json",
                    success: function( data ){
                        jQuery( 'body' ).css( 'cursor', 'default' );
                        if ( data.id ) {
                            jQuery( '#file_name_block_' + data.id + ' a' ).html( title );
                            jQuery( '#file_name_block_' + data.id + ' a' ).data( 'title', jQuery.base64Encode( title ) );
                            jQuery( '#file_name_block_' + data.id + ' a' ).data( 'description', jQuery.base64Encode( description ) );
                            jQuery( '#file_name_block_' + data.id + ' a' ).attr( 'title', 'Description: ' + jQuery.base64Encode( description ) );

                            if( data.file_tags )
                                jQuery( 'a[rel="' + data.id + '"]'  ).data( 'file_tags', data.file_tags );

                            if( external ) {
                                jQuery( '#file_name_block_' + data.id + ' span.external_info.url' ).html( data.url );
                                jQuery( '#file_name_block_' + data.id + ' span.external_info.url_protect' ).html( data.protect_url );
                            }
                            jQuery.fancybox.close();
                        }
                    }
                 });

            });

            <?php if( !empty( $_GET['change_filter'] ) && isset( $_GET[ 'filter_' . $_GET['change_filter'] ] ) ) { ?>
                var filter = '<?php echo $_GET['change_filter']; ?>';
                jQuery( '#change_filter' ).val( filter );
                jQuery( '#select_filter' ).css( 'display', 'none' );
                jQuery( '#select_filter' ).html( '' );
                jQuery( '#load_select_filter' ).addClass( 'wpc_ajax_loading' );
                jQuery.ajax({
                type: 'POST',
                url: '<?php echo get_admin_url() ?>admin-ajax.php',
                data: 'action=wpc_get_options_filter_for_files&filter=' + filter,
                dataType: 'html',
                    success: function( data ){
                        jQuery( '#select_filter' ).html( data );
                        jQuery( '#load_select_filter' ).removeClass( 'wpc_ajax_loading' );
                        jQuery( '#select_filter' ).css( 'display', 'block' );
                        jQuery( '#select_filter' ).val( '<?php echo $_GET[ 'filter_' . $_GET['change_filter'] ]; ?>' );
                    }
                });
             <?php } ?>

            if( typeof plupload != 'undefined' ) {
                plupload.addI18n({
                    "Stop Upload":"<?php _e( 'Stop Upload', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Upload URL might be wrong or doesn't exist.":"<?php _e( 'Upload URL might be wrong or doesn\'t exist.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "tb":"<?php _e( 'tb', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Size":"<?php _e( 'Size', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Close":"<?php _e( 'Close', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Init error.":"<?php _e( 'Init error.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Add files to the upload queue and click the start button.":"<?php _e( 'Add files to the upload queue and click the start button.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Filename":"<?php _e( 'Filename', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Image format either wrong or not supported.":"<?php _e( 'Image format either wrong or not supported.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Status":"<?php _e( 'Status', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "HTTP Error.":"<?php _e( 'HTTP Error.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Start Upload":"<?php _e( 'Start Upload', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "mb":"<?php _e( 'mb', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "kb":"<?php _e( 'kb', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Duplicate file error.":"<?php _e( 'Duplicate file error.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "File size error.":"<?php _e( 'File size error.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "N/A":"<?php _e( 'N/A', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "gb":"<?php _e( 'gb', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Error: Invalid file extension:":"<?php _e( 'Error: Invalid file extension:', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Select files":"<?php _e( 'Select files', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "%s already present in the queue.":"<?php _e( '%s already present in the queue.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "File: %s":"<?php _e( 'File: %s', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "b":"<?php _e( 'b', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Uploaded %d/%d files":"<?php _e( 'Uploaded %d/%d files', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Upload element accepts only %d file(s) at a time. Extra files were stripped.":"<?php _e( 'Upload element accepts only %d file(s) at a time. Extra files were stripped.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "%d files queued":"<?php _e( '%d files queued', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "File: %s, size: %d, max file size: %d":"<?php _e( 'File: %s, size: %d, max file size: %d', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Drag files here.":"<?php _e( 'Drag files here.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Runtime ran out of available memory.":"<?php _e( 'Runtime ran out of available memory.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "File count error.":"<?php _e( 'File count error.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "File extension error.":"<?php _e( 'File extension error.', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Error: File too large:":"<?php _e( 'Error: File too large:', WPC_CLIENT_TEXT_DOMAIN ) ?>",
                    "Add Files":"<?php _e( 'Add Files', WPC_CLIENT_TEXT_DOMAIN ) ?>"
                });
            }

        });
    </script>

</div>